Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.

Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows

PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\managers> PS> Select-String -Pattern "self\.client\." -Path *.py -AllMatches
PS> : The term 'PS>' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:1
+ PS> Select-String -Pattern "self\.client\." -Path *.py -AllMatches
+ ~~~
    + CategoryInfo          : ObjectNotFound: (PS>:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\managers> PS> Select-String -Pattern "self\.order_client\." -Path *.py -AllMatches
PS> : The term 'PS>' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:1
+ PS> Select-String -Pattern "self\.order_client\." -Path *.py -AllMatc ...
+ ~~~
    + CategoryInfo          : ObjectNotFound: (PS>:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\managers> PS> Select-String -Pattern "self\.client\." -Path *.py -AllMatches
PS> : The term 'PS>' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:1
+ PS> Select-String -Pattern "self\.client\." -Path *.py -AllMatches
+ ~~~
    + CategoryInfo          : ObjectNotFound: (PS>:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\managers> PS> Select-String -Pattern "self\.order_client\." -Path *.py -AllMatches
PS> : The term 'PS>' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:1
+ PS> Select-String -Pattern "self\.order_client\." -Path *.py -AllMatc ...
+ ~~~
    + CategoryInfo          : ObjectNotFound: (PS>:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\managers> cd
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\managers> cd..
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot> cd
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot>
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot> cd..
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot> PS> cd "G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot"
PS> : The term 'PS>' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:1
+ PS> cd "G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot"
+ ~~~
    + CategoryInfo          : ObjectNotFound: (PS>:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

PS G:\My Drive\MyBotFolder\Bybit\pybit_bot> PS> Select-String -Pattern "self\.client\." -Path .\**\*.py -AllMatches
PS> : The term 'PS>' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:1
+ PS> Select-String -Pattern "self\.client\." -Path .\**\*.py -AllMatch ...
+ ~~~
    + CategoryInfo          : ObjectNotFound: (PS>:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

PS G:\My Drive\MyBotFolder\Bybit\pybit_bot> PS> Select-String -Pattern "self\.order_client\." -Path .\**\*.py -AllMatches
PS> : The term 'PS>' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:1
+ PS> Select-String -Pattern "self\.order_client\." -Path .\**\*.py -Al ...
+ ~~~
    + CategoryInfo          : ObjectNotFound: (PS>:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

PS G:\My Drive\MyBotFolder\Bybit\pybit_bot> cd "G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\managers"
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\managers> cd..
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot> cd core
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\core> Select-String -Pattern 'self\.client\.'        -Path *.py -AllMatches

order_manager_client.py:83:            response = self.client._make_request(
order_manager_client.py:122:            response = self.client._make_request("GET", "/v5/position/list", params)
order_manager_client.py:133:            response = self.client._make_request("GET", "/v5/account/wallet-balance",
{"accountType": "UNIFIED"})
order_manager_client.py:162:            response = self.client._make_request("GET", "/v5/order/realtime", params)
order_manager_client.py:196:            response = self.client._make_request("GET", "/v5/order/history", params)
order_manager_client.py:225:            response = self.client._make_request("GET", "/v5/order/history", params)
order_manager_client.py:240:            response = self.client._make_request("GET", "/v5/execution/list", exec_params)
order_manager_client.py:327:            response = self.client._make_request("GET", "/v5/market/instruments-info",
params, auth_required=False)
order_manager_client.py:436:            response = self.client._make_request("GET", "/v5/market/tickers",
ticker_params, auth_required=False)
order_manager_client.py:513:                    response = self.client._make_request("POST", "/v5/order/create",
params)
order_manager_client.py:667:                    response = self.client._make_request("POST",
"/v5/position/trading-stop", params)
order_manager_client.py:799:                    response = self.client._make_request("POST", "/v5/order/cancel",
params)


PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\core> Select-String -Pattern 'self\.order_client\.'  -Path *.py -AllMatches
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\core> cd..
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot> cd..
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot> cd "G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot"
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot>
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot> Select-String -Pattern 'self\.(client|order_client)\.' `
>>               -Path .\core\*.py,.\managers\*.py `
>>               -AllMatches

core\order_manager_client.py:83:            response = self.client._make_request(
core\order_manager_client.py:122:            response = self.client._make_request("GET", "/v5/position/list", params)
core\order_manager_client.py:133:            response = self.client._make_request("GET", "/v5/account/wallet-balance",
{"accountType": "UNIFIED"})
core\order_manager_client.py:162:            response = self.client._make_request("GET", "/v5/order/realtime", params)
core\order_manager_client.py:196:            response = self.client._make_request("GET", "/v5/order/history", params)
core\order_manager_client.py:225:            response = self.client._make_request("GET", "/v5/order/history", params)
core\order_manager_client.py:240:            response = self.client._make_request("GET", "/v5/execution/list",
exec_params)
core\order_manager_client.py:327:            response = self.client._make_request("GET",
"/v5/market/instruments-info", params, auth_required=False)
core\order_manager_client.py:436:            response = self.client._make_request("GET", "/v5/market/tickers",
ticker_params, auth_required=False)
core\order_manager_client.py:513:                    response = self.client._make_request("POST", "/v5/order/create",
params)
core\order_manager_client.py:667:                    response = self.client._make_request("POST",
"/v5/position/trading-stop", params)
core\order_manager_client.py:799:                    response = self.client._make_request("POST", "/v5/order/cancel",
params)
managers\data_manager.py:71:            ticker = self.client.get_ticker(self.default_symbol)
managers\data_manager.py:135:            ticker = self.client.get_ticker(symbol)
managers\data_manager.py:171:            ticker = self.client.get_ticker(symbol)
managers\data_manager.py:225:            ticker = self.client.get_ticker(symbol)
managers\data_manager.py:264:            orderbook = self.client.get_orderbook(symbol, limit=depth)
managers\data_manager.py:308:                klines = self.client.get_klines(
managers\data_manager.py:322:                    result = self.client.get_kline(**params)
managers\data_manager.py:330:                    klines = self.client.get_klines(symbol, bybit_interval, limit)
managers\data_manager.py:382:                    klines = self.client.get_klines(
managers\data_manager.py:398:                        result = self.client.get_kline(**params)
managers\order_manager.py:72:            positions = self.order_client.get_positions(default_symbol)
managers\order_manager.py:83:            open_orders = self.order_client.get_open_orders(default_symbol)
managers\order_manager.py:106:            balance_data = self.order_client.get_account_balance()
managers\order_manager.py:130:            ticker = self.client.get_ticker(symbol)
managers\order_manager.py:156:            size_str = self.order_client.calculate_position_size(symbol, amount_usdt)
managers\order_manager.py:197:                qty = float(self.order_client.calculate_position_size(symbol,
usdt_amount))
managers\order_manager.py:202:            order = self.order_client.place_active_order(
managers\order_manager.py:260:                positions = self.order_client.get_positions(symbol)
managers\order_manager.py:287:                    tp_price = self.order_client._round_price(symbol, tp_price_float)
managers\order_manager.py:291:                    sl_price = self.order_client._round_price(symbol, sl_price_float)
managers\order_manager.py:297:                    tp_price = self.order_client._round_price(symbol, tp_price_float)
managers\order_manager.py:301:                    sl_price = self.order_client._round_price(symbol, sl_price_float)
managers\order_manager.py:305:            result = self.order_client.set_trading_stop(
managers\order_manager.py:334:            fill = self.order_client.get_order_fill_info(symbol, order_id)
managers\order_manager.py:363:            order_result = self.order_client.place_active_order(
managers\order_manager.py:423:            order_result = self.order_client.place_active_order(
managers\order_manager.py:477:            result = self.order_client.close_position(symbol)
managers\order_manager.py:506:            positions = self.order_client.get_positions(symbol)
managers\order_manager.py:535:            result = self.order_client.set_trading_stop(**params)
managers\order_manager.py:557:            positions = self.order_client.get_positions(symbol)
managers\order_manager.py:589:            orders = self.order_client.get_open_orders(symbol)
managers\order_manager.py:627:            cancel_result = self.order_client.cancel_order(symbol, order_id)
managers\order_manager.py:667:                result = self.order_client.cancel_all_orders(symbol)
managers\order_manager.py:707:                    result = self.order_client.cancel_all_orders(symbol)
managers\order_manager.py:747:                fill_info = self.order_client.get_order_fill_info(symbol, order_id)
managers\order_manager.py:758:                    pos = self.order_client.get_positions(symbol)
managers\order_manager.py:849:                positions = self.order_client.get_positions(symbol)
managers\order_manager.py:888:            tp_price_str = self.order_client._round_price(symbol, tp_price)
managers\order_manager.py:889:            sl_price_str = self.order_client._round_price(symbol, sl_price)
managers\order_manager.py:894:            result = self.order_client.set_trading_stop(
managers\tpsl_manager.py:162:                positions = self.order_client.get_positions(symbol) if self.order_client
else await self.order_manager.get_positions(symbol)
managers\tpsl_manager.py:233:            positions = self.order_client.get_positions(symbol) if self.order_client else
await self.order_manager.get_positions(symbol)
managers\tpsl_manager.py:297:                result = self.order_client.set_trading_stop(


PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot> Select-String -Pattern 'self\.(client|order_client)\.' `
>>               -Path .\core\*.py,.\managers\*.py `
>>               -AllMatches |
>>   Select-Object Filename, LineNumber, Line |
>>   Export-Csv calls_matrix.csv -NoTypeInformation
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot> Select-String -Pattern 'self\.(client|order_client)\.' `
>>               -Path .\core\*.py,.\managers\*.py `
>>               -AllMatches

core\order_manager_client.py:83:            response = self.client._make_request(
core\order_manager_client.py:122:            response = self.client._make_request("GET", "/v5/position/list", params)
core\order_manager_client.py:133:            response = self.client._make_request("GET", "/v5/account/wallet-balance",
{"accountType": "UNIFIED"})
core\order_manager_client.py:162:            response = self.client._make_request("GET", "/v5/order/realtime", params)
core\order_manager_client.py:196:            response = self.client._make_request("GET", "/v5/order/history", params)
core\order_manager_client.py:225:            response = self.client._make_request("GET", "/v5/order/history", params)
core\order_manager_client.py:240:            response = self.client._make_request("GET", "/v5/execution/list",
exec_params)
core\order_manager_client.py:327:            response = self.client._make_request("GET",
"/v5/market/instruments-info", params, auth_required=False)
core\order_manager_client.py:436:            response = self.client._make_request("GET", "/v5/market/tickers",
ticker_params, auth_required=False)
core\order_manager_client.py:513:                    response = self.client._make_request("POST", "/v5/order/create",
params)
core\order_manager_client.py:667:                    response = self.client._make_request("POST",
"/v5/position/trading-stop", params)
core\order_manager_client.py:799:                    response = self.client._make_request("POST", "/v5/order/cancel",
params)
core\order_manager_client.py:856:            response = self.client._make_request("POST", "/v5/order/cancel-all",
params)
core\order_manager_client.py:940:            response = self.client._make_request("GET", "/v5/execution/list", params)
core\order_manager_client.py:977:            response = self.client._make_request("GET", "/v5/position/closed-pnl",
params)
managers\data_manager.py:71:            ticker = self.client.get_ticker(self.default_symbol)
managers\data_manager.py:135:            ticker = self.client.get_ticker(symbol)
managers\data_manager.py:171:            ticker = self.client.get_ticker(symbol)
managers\data_manager.py:225:            ticker = self.client.get_ticker(symbol)
managers\data_manager.py:264:            orderbook = self.client.get_orderbook(symbol, limit=depth)
managers\data_manager.py:308:                klines = self.client.get_klines(
managers\data_manager.py:322:                    result = self.client.get_kline(**params)
managers\data_manager.py:330:                    klines = self.client.get_klines(symbol, bybit_interval, limit)
managers\data_manager.py:382:                    klines = self.client.get_klines(
managers\data_manager.py:398:                        result = self.client.get_kline(**params)
managers\order_manager.py:72:            positions = self.order_client.get_positions(default_symbol)
managers\order_manager.py:83:            open_orders = self.order_client.get_open_orders(default_symbol)
managers\order_manager.py:106:            balance_data = self.order_client.get_account_balance()
managers\order_manager.py:130:            ticker = self.client.get_ticker(symbol)
managers\order_manager.py:156:            size_str = self.order_client.calculate_position_size(symbol, amount_usdt)
managers\order_manager.py:197:                qty = float(self.order_client.calculate_position_size(symbol,
usdt_amount))
managers\order_manager.py:202:            order = self.order_client.place_active_order(
managers\order_manager.py:260:                positions = self.order_client.get_positions(symbol)
managers\order_manager.py:287:                    tp_price = self.order_client._round_price(symbol, tp_price_float)
managers\order_manager.py:291:                    sl_price = self.order_client._round_price(symbol, sl_price_float)
managers\order_manager.py:297:                    tp_price = self.order_client._round_price(symbol, tp_price_float)
managers\order_manager.py:301:                    sl_price = self.order_client._round_price(symbol, sl_price_float)
managers\order_manager.py:305:            result = self.order_client.set_trading_stop(
managers\order_manager.py:334:            fill = self.order_client.get_order_fill_info(symbol, order_id)
managers\order_manager.py:363:            order_result = self.order_client.place_active_order(
managers\order_manager.py:423:            order_result = self.order_client.place_active_order(
managers\order_manager.py:477:            result = self.order_client.close_position(symbol)
managers\order_manager.py:506:            positions = self.order_client.get_positions(symbol)
managers\order_manager.py:535:            result = self.order_client.set_trading_stop(**params)
managers\order_manager.py:557:            positions = self.order_client.get_positions(symbol)
managers\order_manager.py:589:            orders = self.order_client.get_open_orders(symbol)
managers\order_manager.py:627:            cancel_result = self.order_client.cancel_order(symbol, order_id)
managers\order_manager.py:667:                result = self.order_client.cancel_all_orders(symbol)
managers\order_manager.py:707:                    result = self.order_client.cancel_all_orders(symbol)
managers\order_manager.py:747:                fill_info = self.order_client.get_order_fill_info(symbol, order_id)
managers\order_manager.py:758:                    pos = self.order_client.get_positions(symbol)
managers\order_manager.py:849:                positions = self.order_client.get_positions(symbol)
managers\order_manager.py:888:            tp_price_str = self.order_client._round_price(symbol, tp_price)
managers\order_manager.py:889:            sl_price_str = self.order_client._round_price(symbol, sl_price)
managers\order_manager.py:894:            result = self.order_client.set_trading_stop(
managers\tpsl_manager.py:162:                positions = self.order_client.get_positions(symbol) if self.order_client
else await self.order_manager.get_positions(symbol)
managers\tpsl_manager.py:233:            positions = self.order_client.get_positions(symbol) if self.order_client else
await self.order_manager.get_positions(symbol)
managers\tpsl_manager.py:297:                result = self.order_client.set_trading_stop(


PS G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot> cd..
PS G:\My Drive\MyBotFolder\Bybit\pybit_bot> python -m pybit_bot.cli.main start
2025-06-20 11:46:47,839 [INFO] Using repository config directory: G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\configs
Using repository config directory: G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\configs
2025-06-20 11:46:47,839 [INFO] Using config from: G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\configs
Using config from: G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\configs
2025-06-20 11:46:47,841 [INFO] Starting bot in current process using config: G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\configs
Starting bot in current process using config: G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\configs
2025-06-20 11:46:47 [TradingEngine] INFO: Initializing Trading Engine...
2025-06-20 11:46:47,848 [INFO] Initializing Trading Engine...
2025-06-20 11:46:47 [TradingEngine] INFO: Found config files: ['general.json', 'indicators.json', 'strategy.json', 'execution.json']
2025-06-20 11:46:47,849 [INFO] Found config files: ['general.json', 'indicators.json', 'strategy.json', 'execution.json']
Loading configs from: ['general.json', 'indicators.json', 'strategy.json', 'execution.json']
2025-06-20 11:46:47 [TradingEngine] INFO: Loaded config from general.json
2025-06-20 11:46:47,853 [INFO] Loaded config from general.json
Loaded: general.json
2025-06-20 11:46:47 [TradingEngine] INFO: Loaded config from indicators.json
2025-06-20 11:46:47,857 [INFO] Loaded config from indicators.json
Loaded: indicators.json
2025-06-20 11:46:47 [TradingEngine] INFO: Loaded config from strategy.json
2025-06-20 11:46:47,862 [INFO] Loaded config from strategy.json
Loaded: strategy.json
2025-06-20 11:46:47 [TradingEngine] INFO: Loaded config from execution.json
2025-06-20 11:46:47,868 [INFO] Loaded config from execution.json
Loaded: execution.json
Engine initialized with config from: G:\My Drive\MyBotFolder\Bybit\pybit_bot\pybit_bot\configs
2025-06-20 11:46:47 [TradingEngine] INFO: Initializing trading engine components...
2025-06-20 11:46:47,871 [INFO] Initializing trading engine components...
Starting engine initialization...
2025-06-20 11:46:47 [TradingEngine] INFO: Initializing API client...
2025-06-20 11:46:47,872 [INFO] Initializing API client...
Step 1: Initializing API client...
2025-06-20 11:46:47 [TradingEngine] INFO: BybitClient initialized for testnet
2025-06-20 11:46:47,872 [INFO] BybitClient initialized for testnet
2025-06-20 11:46:47 [TradingEngine] INFO: Bybit client initialized (testnet: True)
2025-06-20 11:46:47,872 [INFO] Bybit client initialized (testnet: True)
API client initialized, testnet: True
2025-06-20 11:46:47 [TradingEngine] INFO: Initializing DataManager...
2025-06-20 11:46:47,873 [INFO] Initializing DataManager...
Step 2: Initializing DataManager...
2025-06-20 11:46:47 [TradingEngine] INFO: DataManager initialized
2025-06-20 11:46:47,873 [INFO] DataManager initialized
2025-06-20 11:46:47 [TradingEngine] INFO: Initializing OrderManager...
2025-06-20 11:46:47,873 [INFO] Initializing OrderManager...
Step 3: Initializing OrderManager...
2025-06-20 11:46:48 [TradingEngine] INFO: Cached info for 500 instruments
2025-06-20 11:46:48,931 [INFO] Cached info for 500 instruments
2025-06-20 11:46:48 [TradingEngine] INFO: OrderManager initialized
2025-06-20 11:46:48,932 [INFO] OrderManager initialized
2025-06-20 11:46:48 [TradingEngine] INFO: Initializing StrategyManager...
2025-06-20 11:46:48,933 [INFO] Initializing StrategyManager...
Step 4: Initializing StrategyManager...
2025-06-20 11:46:48 [TradingEngine] INFO: Initializing StrategyManager
2025-06-20 11:46:48,935 [INFO] Initializing StrategyManager
2025-06-20 11:46:48 [TradingEngine] INFO: Loading strategies
2025-06-20 11:46:48,936 [INFO] Loading strategies
2025-06-20 11:46:48 [TradingEngine] INFO: Active strategy: strategy_b
2025-06-20 11:46:48,937 [INFO] Active strategy: strategy_b
2025-06-20 11:46:48 [TradingEngine] INFO: Using default symbol: BTCUSDT
2025-06-20 11:46:48,938 [INFO] Using default symbol: BTCUSDT
2025-06-20 11:46:48 [TradingEngine] INFO: Importing strategy module: pybit_bot.strategies.strategy_b
2025-06-20 11:46:48,939 [INFO] Importing strategy module: pybit_bot.strategies.strategy_b
2025-06-20 11:46:48 [StrategyB] INFO: Strategy B initialized for BTCUSDT with parameters:
2025-06-20 11:46:48,968 [INFO] Strategy B initialized for BTCUSDT with parameters:
2025-06-20 11:46:48 [StrategyB] INFO: - Primary Timeframe: 1m
2025-06-20 11:46:48,970 [INFO] - Primary Timeframe: 1m
2025-06-20 11:46:48 [StrategyB] INFO: - ATR Length: 14
2025-06-20 11:46:48,971 [INFO] - ATR Length: 14
2025-06-20 11:46:48 [StrategyB] INFO: - TP ATR Multiplier: 4.0
2025-06-20 11:46:48,972 [INFO] - TP ATR Multiplier: 4.0
2025-06-20 11:46:48 [StrategyB] INFO: - Trail ATR Multiplier: 2.0
2025-06-20 11:46:48,973 [INFO] - Trail ATR Multiplier: 2.0
2025-06-20 11:46:48 [StrategyB] INFO: - Trail Activation: 0.5
2025-06-20 11:46:48,975 [INFO] - Trail Activation: 0.5
2025-06-20 11:46:48 [StrategyB] INFO: - Trade Rule: LONG on even minutes, SHORT on odd minutes
2025-06-20 11:46:48,976 [INFO] - Trade Rule: LONG on even minutes, SHORT on odd minutes
2025-06-20 11:46:48 [StrategyB] INFO: - Force Alternating Signals: True
2025-06-20 11:46:48,977 [INFO] - Force Alternating Signals: True
2025-06-20 11:46:48 [TradingEngine] INFO: Successfully loaded strategy: strategy_b
2025-06-20 11:46:48,978 [INFO] Successfully loaded strategy: strategy_b
2025-06-20 11:46:48 [TradingEngine] INFO: Initializing TPSLManager...
2025-06-20 11:46:48,979 [INFO] Initializing TPSLManager...
Step 5: Initializing TPSLManager...
2025-06-20 11:46:48 [TradingEngine] INFO: TPSLManager initialized
2025-06-20 11:46:48,981 [INFO] TPSLManager initialized
2025-06-20 11:46:48 [TradingEngine] INFO: Testing API connection...
2025-06-20 11:46:48,983 [INFO] Testing API connection...
Step 6: Testing API connection...
2025-06-20 11:46:49 [TradingEngine] INFO: API connection test successful, server time: 1750384009
2025-06-20 11:46:49,337 [INFO] API connection test successful, server time: 1750384009
2025-06-20 11:46:49 [TradingEngine] INFO: Trading engine initialized successfully
2025-06-20 11:46:49,341 [INFO] Trading engine initialized successfully
Engine initialization complete: SUCCESS
2025-06-20 11:46:49 [TradingEngine] INFO: Starting trading engine...
2025-06-20 11:46:49,343 [INFO] Starting trading engine...
Starting trading engine...
Step 1: Setting engine state...
Step 2: Creating new event loop...
Event loop created successfully
Step 3: Starting market data manager...
Step 4: Creating main thread...
Thread created, starting...
Main loop wrapper started
Event loop set for thread
Starting main loop...
Main thread started successfully
2025-06-20 11:46:49 [TradingEngine] INFO: Main trading loop started
2025-06-20 11:46:49,353 [INFO] Main trading loop started
2025-06-20 11:46:49 [TradingEngine] INFO: Trading engine started
2025-06-20 11:46:49,353 [INFO] Trading engine started
Main trading loop started
Trading engine started successfully
2025-06-20 11:46:49,361 [INFO] Bot started successfully
Bot started successfully
Press Ctrl+C to stop the bot
Waiting 12 seconds until next minute close
2025-06-20 11:46:49 [TradingEngine] INFO: Waiting 12 seconds until next minute close
2025-06-20 11:46:49,711 [INFO] Waiting 12 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
2025-06-20 11:47:01 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:47:01,748 [INFO] Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:47:01 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:47:01,893 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:47:01 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384020000', '102907', '102907', '102907', '102907', '0', '0'], ['1750383960000', '103139.6', '103139.6', '102907', '102907', '0.129', '13292.7698']]
2025-06-20 11:47:01,894 [INFO] Klines response type: <class 'list'>, data: [['1750384020000', '102907', '102907', '102907', '102907', '0', '0'], ['1750383960000', '103139.6', '103139.6', '102907', '102907', '0.129', '13292.7698']]
Updated data cache for BTCUSDT 1m
New data received for BTCUSDT 1m
Running strategies for BTCUSDT 1m
2025-06-20 11:47:01 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:47:01,899 [INFO] Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:47:01 [StrategyB] INFO: Latest candle for BTCUSDT 1m:
2025-06-20 11:47:01,914 [INFO] Latest candle for BTCUSDT 1m:
2025-06-20 11:47:01 [StrategyB] INFO: - Time: 2025-06-20 10:08:00 (Minute: 8)
2025-06-20 11:47:01,914 [INFO] - Time: 2025-06-20 10:08:00 (Minute: 8)
2025-06-20 11:47:01 [StrategyB] INFO: - Price: 103139.60
2025-06-20 11:47:01,914 [INFO] - Price: 103139.60
2025-06-20 11:47:01 [StrategyB] INFO: - Even minute: True
2025-06-20 11:47:01,914 [INFO] - Even minute: True
2025-06-20 11:47:01 [StrategyB] INFO: Minute 8 is even, generating LONG signal
2025-06-20 11:47:01,915 [INFO] Minute 8 is even, generating LONG signal
2025-06-20 11:47:01 [StrategyB] INFO: Generated 1 signals for BTCUSDT
2025-06-20 11:47:01,917 [INFO] Generated 1 signals for BTCUSDT
2025-06-20 11:47:01 [StrategyB] INFO: Signal: SignalType.BUY at price 103139.6 with SL=102772.66, TP=103873.49
2025-06-20 11:47:01,917 [INFO] Signal: SignalType.BUY at price 103139.6 with SL=102772.66, TP=103873.49
2025-06-20 11:47:01 [TradingEngine] INFO: ======= BTCUSDT 1m CLOSE at 2025-06-20 00:08:00 =======
2025-06-20 11:47:01,929 [INFO] ======= BTCUSDT 1m CLOSE at 2025-06-20 00:08:00 =======
2025-06-20 11:47:01 [TradingEngine] INFO: OHLCV: Open=103139.60, High=103139.60, Low=102907.00, Close=103139.60, Volume=0.04
2025-06-20 11:47:01,930 [INFO] OHLCV: Open=103139.60, High=103139.60, Low=102907.00, Close=103139.60, Volume=0.04
Processed BTCUSDT 1m candle close at 2025-06-20 00:08:00
Received 1 signals for BTCUSDT
2025-06-20 11:47:01 [TradingEngine] INFO: Signal generated for BTCUSDT: SignalType.BUY LONG
2025-06-20 11:47:01,930 [INFO] Signal generated for BTCUSDT: SignalType.BUY LONG
SIGNAL: BTCUSDT SignalType.BUY LONG
Validating trade for BTCUSDT...
TEST MODE: All trades allowed for testing
Executing signal for BTCUSDT...
Executing signal for BTCUSDT...
Current price for BTCUSDT: 102907.0
Using fixed position size: 0.01
Order side: Buy, direction: LONG
Placing Buy market order for BTCUSDT without TP/SL
2025-06-20 11:47:02 [TradingEngine] INFO: Entering LONG position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:47:02,284 [INFO] Entering LONG position for BTCUSDT, qty=0.01 (without TP/SL)
Engine status: Running=True, Active positions=0
2025-06-20 11:47:02 [TradingEngine] ERROR: Failed to place order: Unknown error
2025-06-20 11:47:02,643 [ERROR] Failed to place order: Unknown error
2025-06-20 11:47:02 [TradingEngine] INFO: LONG order result: {'orderId': 'bcef4fa8-d6e4-4b7b-9e3b-078945ace133', 'orderLinkId': ''}
2025-06-20 11:47:02,644 [INFO] LONG order result: {'orderId': 'bcef4fa8-d6e4-4b7b-9e3b-078945ace133', 'orderLinkId': ''}
Order not filled immediately, will set TP/SL after fill confirmation
2025-06-20 11:47:02 [TradingEngine] INFO: Order executed for BTCUSDT Buy: bcef4fa8-d6e4-4b7b-9e3b-078945ace133
2025-06-20 11:47:02,645 [INFO] Order executed for BTCUSDT Buy: bcef4fa8-d6e4-4b7b-9e3b-078945ace133
SUCCESS: Order executed for BTCUSDT Buy: bcef4fa8-d6e4-4b7b-9e3b-078945ace133
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
2025-06-20 11:47:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:47:02,657 [INFO] Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:47:02 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:47:02,810 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:47:02 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750383900000', '103139.6', '103139.6', '102907', '102907', '0.146', '15046.143'], ['1750383600000', '103139.6', '103139.6', '102907', '103139.6', '0.154', '15880.8732']]
2025-06-20 11:47:02,810 [INFO] Klines response type: <class 'list'>, data: [['1750383900000', '103139.6', '103139.6', '102907', '102907', '0.146', '15046.143'], ['1750383600000', '103139.6', '103139.6', '102907', '103139.6', '0.154', '15880.8732']]
Updated data cache for BTCUSDT 5m
New data received for BTCUSDT 5m
Running strategies for BTCUSDT 5m
2025-06-20 11:47:02 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['5m']
2025-06-20 11:47:02,823 [INFO] Processing data for BTCUSDT with timeframes: ['5m']
2025-06-20 11:47:02 [StrategyB] WARNING: Not enough data for BTCUSDT 1m
2025-06-20 11:47:02,824 [WARNING] Not enough data for BTCUSDT 1m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
2025-06-20 11:47:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:47:02,834 [INFO] Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:47:02 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:47:02,987 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:47:02 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.038', '106933.4369'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
2025-06-20 11:47:02,990 [INFO] Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.038', '106933.4369'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
Updated data cache for BTCUSDT 1h
New data received for BTCUSDT 1h
Running strategies for BTCUSDT 1h
2025-06-20 11:47:02 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['1h']
2025-06-20 11:47:02,999 [INFO] Processing data for BTCUSDT with timeframes: ['1h']
2025-06-20 11:47:03 [StrategyB] WARNING: Not enough data for BTCUSDT 1m
2025-06-20 11:47:03,001 [WARNING] Not enough data for BTCUSDT 1m
Checking TP/SL conditions
2025-06-20 11:47:03 [TradingEngine] INFO: Checking 1 pending TP/SL orders
2025-06-20 11:47:03,003 [INFO] Checking 1 pending TP/SL orders
2025-06-20 11:47:03 [TradingEngine] INFO: Getting order info for bcef4fa8-d6e4-4b7b-9e3b-078945ace133 on BTCUSDT
2025-06-20 11:47:03,003 [INFO] Getting order info for bcef4fa8-d6e4-4b7b-9e3b-078945ace133 on BTCUSDT
2025-06-20 11:47:03 [TradingEngine] INFO: Order bcef4fa8-d6e4-4b7b-9e3b-078945ace133 filled, setting TP/SL
2025-06-20 11:47:03,366 [INFO] Order bcef4fa8-d6e4-4b7b-9e3b-078945ace133 filled, setting TP/SL
2025-06-20 11:47:03 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=20
2025-06-20 11:47:03,513 [INFO] Fetching kline data for BTCUSDT 1, limit=20
2025-06-20 11:47:03 [TradingEngine] INFO: Retrieved 20 klines for BTCUSDT
2025-06-20 11:47:03,655 [INFO] Retrieved 20 klines for BTCUSDT
2025-06-20 11:47:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384020000', '102907', '103139.6', '102907', '103139.6', '0.01', '1031.2402'], ['1750383960000', '103139.6', '103139.6', '102907', '102907', '0.129', '13292.7698']]
2025-06-20 11:47:03,656 [INFO] Klines response type: <class 'list'>, data: [['1750384020000', '102907', '103139.6', '102907', '103139.6', '0.01', '1031.2402'],['1750383960000', '103139.6', '103139.6', '102907', '102907', '0.129', '13292.7698']]
2025-06-20 11:47:03 [TradingEngine] INFO: Calculated ATR from historical data: 177.81428571429154
2025-06-20 11:47:03,659 [INFO] Calculated ATR from historical data: 177.81428571429154
2025-06-20 11:47:03 [TradingEngine] INFO: Setting TP/SL for filled order bcef4fa8-d6e4-4b7b-9e3b-078945ace133
2025-06-20 11:47:03,660 [INFO] Setting TP/SL for filled order bcef4fa8-d6e4-4b7b-9e3b-078945ace133
2025-06-20 11:47:03 [TradingEngine] INFO: Getting order info for bcef4fa8-d6e4-4b7b-9e3b-078945ace133 on BTCUSDT
2025-06-20 11:47:03,661 [INFO] Getting order info for bcef4fa8-d6e4-4b7b-9e3b-078945ace133 on BTCUSDT
2025-06-20 11:47:04 [TradingEngine] INFO: Fill info for bcef4fa8-d6e4-4b7b-9e3b-078945ace133: {'filled': True, 'fill_price': 103124.02, 'side': 'Buy', 'position_idx': 0}
2025-06-20 11:47:04,018 [INFO] Fill info for bcef4fa8-d6e4-4b7b-9e3b-078945ace133: {'filled': True, 'fill_price': 103124.02, 'side': 'Buy', 'position_idx': 0}
Engine status: Running=True, Active positions=0
2025-06-20 11:47:04 [TradingEngine] INFO: Final TP/SL for BTCUSDT LONG: TP=103835.28, SL=102768.39, Mark Price=103030.78
2025-06-20 11:47:04,184 [INFO] Final TP/SL for BTCUSDT LONG: TP=103835.28, SL=102768.39, Mark Price=103030.78
2025-06-20 11:47:04 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:47:04,338 [WARNING] Error setting trading stop (attempt 1/3): No response
2025-06-20 11:47:05 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:47:05,006 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:47:06 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:47:06,172 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:47:06 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:47:06,173 [ERROR] Failed to set trading stop after 3 attempts
Updating position cache
Updating position cache...
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '103124.02', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '103835.2', 'positionValue': '1031.2402', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '0.1558', 'markPrice': '103139.6', 'adlRankIndicator': 2, 'cumRealisedPnl': '-735.99011149', 'positionMM': '5.156201', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '1031.2402', 'seq': 9481049119, 'updatedTime': '1750384024267', 'side': 'Buy', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '-0.56718211', 'size': '0.01', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '102768.3', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
2025-06-20 11:47:06 [TradingEngine] INFO: Getting order info for bcef4fa8-d6e4-4b7b-9e3b-078945ace133 on BTCUSDT
2025-06-20 11:47:06,324 [INFO] Getting order info for bcef4fa8-d6e4-4b7b-9e3b-078945ace133 on BTCUSDT
Engine status: Running=True, Active positions=0
2025-06-20 11:47:06 [TradingEngine] INFO: Fill info for bcef4fa8-d6e4-4b7b-9e3b-078945ace133: {'filled': True, 'fill_price': 103124.02, 'side': 'Buy', 'position_idx': 0}
2025-06-20 11:47:06,473 [INFO] Fill info for bcef4fa8-d6e4-4b7b-9e3b-078945ace133: {'filled': True, 'fill_price': 103124.02, 'side': 'Buy', 'position_idx': 0}
Pending order bcef4fa8-d6e4-4b7b-9e3b-078945ace133 filled at 103124.02, setting TP/SL
Setting TP/SL for filled order bcef4fa8-d6e4-4b7b-9e3b-078945ace133 at price 103124.02
ATR not found in data cache, calculating approximation
Calculated average range as ATR approximation: 132.91428571428904
Using ATR value: 132.91428571428904 for TP/SL calculation
Calculated TP/SL for BTCUSDT LONG: TP=103655.68, SL=102858.19
2025-06-20 11:47:06 [TradingEngine] INFO: Setting TP/SL for BTCUSDT position: TP=103655.68, SL=102858.19
2025-06-20 11:47:06,631 [INFO] Setting TP/SL for BTCUSDT position: TP=103655.68, SL=102858.19
2025-06-20 11:47:07 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:47:07,235 [WARNING] Error setting trading stop (attempt 1/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:47:08 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:47:08,094 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:47:09 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:47:09,258 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:47:09 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:47:09,260 [ERROR] Failed to set trading stop after 3 attempts
2025-06-20 11:47:09 [TradingEngine] INFO: Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:47:09,261 [INFO] Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:47:09 [TradingEngine] ERROR: Error setting TP/SL: Failed after 3 attempts
2025-06-20 11:47:09,262 [ERROR] Error setting TP/SL: Failed after 3 attempts
ERROR setting TP/SL: Failed after 3 attempts
Waiting 52 seconds until next minute close
2025-06-20 11:47:09 [TradingEngine] INFO: Waiting 52 seconds until next minute close
2025-06-20 11:47:09,411 [INFO] Waiting 52 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
No new data for BTCUSDT 1m
No new data for BTCUSDT 1m
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
No new data for BTCUSDT 5m
No new data for BTCUSDT 5m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
Updating position cache
Updating position cache...
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '103124.02', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '103655.6', 'positionValue': '1031.2402', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '0.1558', 'markPrice': '103139.6', 'adlRankIndicator': 2, 'cumRealisedPnl': '-735.99011149', 'positionMM': '5.156201', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '1031.2402', 'seq': 9481049119, 'updatedTime': '1750384027166', 'side': 'Buy', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '-0.56718211', 'size': '0.01', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '102858.1', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
Waiting 60 seconds until next minute close
2025-06-20 11:48:01 [TradingEngine] INFO: Waiting 60 seconds until next minute close
2025-06-20 11:48:01,705 [INFO] Waiting 60 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
2025-06-20 11:49:01 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:49:01,715 [INFO] Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:49:01 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:49:01,859 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:49:01 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384140000', '102907', '102907', '102907', '102907', '0', '0'], ['1750384080000', '103139.6', '103139.6', '102907', '102907', '0.03', '3087.2992']]
2025-06-20 11:49:01,860 [INFO] Klines response type: <class 'list'>, data: [['1750384140000', '102907', '102907', '102907', '102907', '0', '0'], ['1750384080000', '103139.6', '103139.6', '102907', '102907', '0.03', '3087.2992']]
Updated data cache for BTCUSDT 1m
New data received for BTCUSDT 1m
Running strategies for BTCUSDT 1m
2025-06-20 11:49:01 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:49:01,863 [INFO] Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:49:01 [StrategyB] INFO: Latest candle for BTCUSDT 1m:
2025-06-20 11:49:01,865 [INFO] Latest candle for BTCUSDT 1m:
2025-06-20 11:49:01 [StrategyB] INFO: - Time: 2025-06-20 10:10:00 (Minute: 10)
2025-06-20 11:49:01,865 [INFO] - Time: 2025-06-20 10:10:00 (Minute: 10)
2025-06-20 11:49:01 [StrategyB] INFO: - Price: 103139.60
2025-06-20 11:49:01,865 [INFO] - Price: 103139.60
2025-06-20 11:49:01 [StrategyB] INFO: - Even minute: True
2025-06-20 11:49:01,865 [INFO] - Even minute: True
2025-06-20 11:49:01 [StrategyB] INFO: FORCING SELL signal (alternating from previous BUY)
2025-06-20 11:49:01,867 [INFO] FORCING SELL signal (alternating from previous BUY)
2025-06-20 11:49:01 [StrategyB] INFO: Minute 10 is odd, generating SHORT signal
2025-06-20 11:49:01,867 [INFO] Minute 10 is odd, generating SHORT signal
2025-06-20 11:49:01 [StrategyB] INFO: Generated 1 signals for BTCUSDT
2025-06-20 11:49:01,867 [INFO] Generated 1 signals for BTCUSDT
2025-06-20 11:49:01 [StrategyB] INFO: Signal: SignalType.SELL at price 103139.6 with SL=103539.77, TP=102339.26
2025-06-20 11:49:01,868 [INFO] Signal: SignalType.SELL at price 103139.6 with SL=103539.77, TP=102339.26
2025-06-20 11:49:01 [TradingEngine] INFO: ======= BTCUSDT 1m CLOSE at 2025-06-20 00:10:00 =======
2025-06-20 11:49:01,869 [INFO] ======= BTCUSDT 1m CLOSE at 2025-06-20 00:10:00 =======
2025-06-20 11:49:01 [TradingEngine] INFO: OHLCV: Open=103139.60, High=103139.60, Low=102907.00, Close=103139.60, Volume=0.21
2025-06-20 11:49:01,869 [INFO] OHLCV: Open=103139.60, High=103139.60, Low=102907.00, Close=103139.60, Volume=0.21
Processed BTCUSDT 1m candle close at 2025-06-20 00:10:00
Received 1 signals for BTCUSDT
2025-06-20 11:49:01 [TradingEngine] INFO: Signal generated for BTCUSDT: SignalType.SELL SHORT
2025-06-20 11:49:01,869 [INFO] Signal generated for BTCUSDT: SignalType.SELL SHORT
SIGNAL: BTCUSDT SignalType.SELL SHORT
Validating trade for BTCUSDT...
TEST MODE: All trades allowed for testing
Executing signal for BTCUSDT...
Executing signal for BTCUSDT...
Current price for BTCUSDT: 102907.0
Using fixed position size: 0.01
Order side: Sell, direction: SHORT
Placing Sell market order for BTCUSDT without TP/SL
2025-06-20 11:49:02 [TradingEngine] INFO: Entering SHORT position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:49:02,232 [INFO] Entering SHORT position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:49:02 [TradingEngine] ERROR: Failed to place order: Unknown error
2025-06-20 11:49:02,594 [ERROR] Failed to place order: Unknown error
2025-06-20 11:49:02 [TradingEngine] INFO: SHORT order result: {'orderId': 'b60283d9-e048-4ff0-9f40-41e5671a0553', 'orderLinkId': ''}
2025-06-20 11:49:02,595 [INFO] SHORT order result: {'orderId': 'b60283d9-e048-4ff0-9f40-41e5671a0553', 'orderLinkId': ''}
Order not filled immediately, will set TP/SL after fill confirmation
2025-06-20 11:49:02 [TradingEngine] INFO: Order executed for BTCUSDT Sell: b60283d9-e048-4ff0-9f40-41e5671a0553
2025-06-20 11:49:02,596 [INFO] Order executed for BTCUSDT Sell: b60283d9-e048-4ff0-9f40-41e5671a0553
SUCCESS: Order executed for BTCUSDT Sell: b60283d9-e048-4ff0-9f40-41e5671a0553
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
2025-06-20 11:49:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:49:02,607 [INFO] Fetching kline data for BTCUSDT 5, limit=100
Engine status: Running=True, Active positions=0
2025-06-20 11:49:02 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:49:02,754 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:49:02 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750383900000', '103139.6', '103139.6', '102907', '102907', '0.195', '20092.9388'], ['1750383600000', '103139.6', '103139.6', '102907', '103139.6', '0.154', '15880.8732']]
2025-06-20 11:49:02,754 [INFO] Klines response type: <class 'list'>, data: [['1750383900000', '103139.6', '103139.6', '102907', '102907', '0.195', '20092.9388'], ['1750383600000', '103139.6', '103139.6', '102907', '103139.6', '0.154', '15880.8732']]
No new data for BTCUSDT 5m
No new data for BTCUSDT 5m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
2025-06-20 11:49:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:49:02,758 [INFO] Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:49:03 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:49:03,106 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:49:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.087', '111980.2327'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
2025-06-20 11:49:03,107 [INFO] Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.087', '111980.2327'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
2025-06-20 11:49:03 [TradingEngine] INFO: Checking 1 pending TP/SL orders
2025-06-20 11:49:03,109 [INFO] Checking 1 pending TP/SL orders
2025-06-20 11:49:03 [TradingEngine] INFO: Getting order info for b60283d9-e048-4ff0-9f40-41e5671a0553 on BTCUSDT
2025-06-20 11:49:03,109 [INFO] Getting order info for b60283d9-e048-4ff0-9f40-41e5671a0553 on BTCUSDT
2025-06-20 11:49:03 [TradingEngine] INFO: Order b60283d9-e048-4ff0-9f40-41e5671a0553 filled, setting TP/SL
2025-06-20 11:49:03,472 [INFO] Order b60283d9-e048-4ff0-9f40-41e5671a0553 filled, setting TP/SL
2025-06-20 11:49:03 [TradingEngine] WARNING: No open position for b60283d9-e048-4ff0-9f40-41e5671a0553, skipping TP/SL
2025-06-20 11:49:03,622 [WARNING] No open position for b60283d9-e048-4ff0-9f40-41e5671a0553, skipping TP/SL
Updating position cache
Updating position cache...
Engine status: Running=True, Active positions=0
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '0', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '', 'positionValue': '', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '', 'markPrice': '103124.29', 'adlRankIndicator': 0, 'cumRealisedPnl': '-738.71630549', 'positionMM': '0', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '0', 'seq': 9481049381, 'updatedTime': '1750384142528', 'side': '', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '0', 'size': '0', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
2025-06-20 11:49:04 [TradingEngine] INFO: Getting order info for b60283d9-e048-4ff0-9f40-41e5671a0553 on BTCUSDT
2025-06-20 11:49:04,085 [INFO] Getting order info for b60283d9-e048-4ff0-9f40-41e5671a0553 on BTCUSDT
2025-06-20 11:49:04 [TradingEngine] INFO: Fill info for b60283d9-e048-4ff0-9f40-41e5671a0553: {'filled': True, 'fill_price': 102908.0, 'side': 'Sell', 'position_idx': 0}
2025-06-20 11:49:04,238 [INFO] Fill info for b60283d9-e048-4ff0-9f40-41e5671a0553: {'filled': True, 'fill_price': 102908.0, 'side': 'Sell', 'position_idx': 0}
Pending order b60283d9-e048-4ff0-9f40-41e5671a0553 filled at 102908.0, setting TP/SL
Setting TP/SL for filled order b60283d9-e048-4ff0-9f40-41e5671a0553 at price 102908.0
ATR not found in data cache, calculating approximation
Calculated average range as ATR approximation: 132.91428571428904
Using ATR value: 132.91428571428904 for TP/SL calculation
Calculated TP/SL for BTCUSDT SHORT: TP=102376.34, SL=103173.83
2025-06-20 11:49:04 [TradingEngine] INFO: Setting TP/SL for BTCUSDT position: TP=102376.34, SL=103173.83
2025-06-20 11:49:04,697 [INFO] Setting TP/SL for BTCUSDT position: TP=102376.34, SL=103173.83
2025-06-20 11:49:05 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:49:05,204 [WARNING] Error setting trading stop (attempt 1/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:49:05 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:49:05,867 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:49:07 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:49:07,027 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:49:07 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:49:07,029 [ERROR] Failed to set trading stop after 3 attempts
2025-06-20 11:49:07 [TradingEngine] INFO: Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:49:07,030 [INFO] Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:49:07 [TradingEngine] ERROR: Error setting TP/SL: Failed after 3 attempts
2025-06-20 11:49:07,031 [ERROR] Error setting TP/SL: Failed after 3 attempts
ERROR setting TP/SL: Failed after 3 attempts
Waiting 54 seconds until next minute close
2025-06-20 11:49:07 [TradingEngine] INFO: Waiting 54 seconds until next minute close
2025-06-20 11:49:07,180 [INFO] Waiting 54 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
No new data for BTCUSDT 1m
No new data for BTCUSDT 1m
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
No new data for BTCUSDT 5m
No new data for BTCUSDT 5m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
Updating position cache
Updating position cache...
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '0', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '', 'positionValue': '', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '', 'markPrice': '103061.67', 'adlRankIndicator': 0, 'cumRealisedPnl': '-738.71630549', 'positionMM': '0', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '0', 'seq': 9481049381, 'updatedTime': '1750384142528', 'side': '', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '0', 'size': '0', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
Waiting 60 seconds until next minute close
2025-06-20 11:50:01 [TradingEngine] INFO: Waiting 60 seconds until next minute close
2025-06-20 11:50:01,898 [INFO] Waiting 60 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
2025-06-20 11:51:01 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:51:01,915 [INFO] Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:51:02 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:51:02,381 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:51:02 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384260000', '102907', '102907', '102907', '102907', '0', '0'], ['1750384200000', '102907', '102907', '102907', '102907', '0', '0']]
2025-06-20 11:51:02,382 [INFO] Klines response type: <class 'list'>, data: [['1750384260000', '102907', '102907', '102907', '102907', '0', '0'], ['1750384200000', '102907', '102907', '102907', '102907', '0', '0']]
Updated data cache for BTCUSDT 1m
New data received for BTCUSDT 1m
Running strategies for BTCUSDT 1m
2025-06-20 11:51:02 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:51:02,395 [INFO] Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:51:02 [StrategyB] INFO: Latest candle for BTCUSDT 1m:
2025-06-20 11:51:02,405 [INFO] Latest candle for BTCUSDT 1m:
2025-06-20 11:51:02 [StrategyB] INFO: - Time: 2025-06-20 10:12:00 (Minute: 12)
2025-06-20 11:51:02,408 [INFO] - Time: 2025-06-20 10:12:00 (Minute: 12)
2025-06-20 11:51:02 [StrategyB] INFO: - Price: 103129.60
2025-06-20 11:51:02,409 [INFO] - Price: 103129.60
2025-06-20 11:51:02 [StrategyB] INFO: - Even minute: True
2025-06-20 11:51:02,410 [INFO] - Even minute: True
2025-06-20 11:51:02 [StrategyB] INFO: FORCING BUY signal (alternating from previous SELL)
2025-06-20 11:51:02,412 [INFO] FORCING BUY signal (alternating from previous SELL)
2025-06-20 11:51:02 [StrategyB] INFO: Minute 12 is even, generating LONG signal
2025-06-20 11:51:02,413 [INFO] Minute 12 is even, generating LONG signal
2025-06-20 11:51:02 [StrategyB] INFO: Generated 1 signals for BTCUSDT
2025-06-20 11:51:02,414 [INFO] Generated 1 signals for BTCUSDT
2025-06-20 11:51:02 [StrategyB] INFO: Signal: SignalType.BUY at price 103129.6 with SL=102762.66, TP=103863.49
2025-06-20 11:51:02,416 [INFO] Signal: SignalType.BUY at price 103129.6 with SL=102762.66, TP=103863.49
2025-06-20 11:51:02 [TradingEngine] INFO: ======= BTCUSDT 1m CLOSE at 2025-06-20 00:12:00 =======
2025-06-20 11:51:02,419 [INFO] ======= BTCUSDT 1m CLOSE at 2025-06-20 00:12:00 =======
2025-06-20 11:51:02 [TradingEngine] INFO: OHLCV: Open=102907.00, High=103129.60, Low=102907.00, Close=103129.60, Volume=0.00
2025-06-20 11:51:02,421 [INFO] OHLCV: Open=102907.00, High=103129.60, Low=102907.00, Close=103129.60, Volume=0.00
Processed BTCUSDT 1m candle close at 2025-06-20 00:12:00
Received 1 signals for BTCUSDT
2025-06-20 11:51:02 [TradingEngine] INFO: Signal generated for BTCUSDT: SignalType.BUY LONG
2025-06-20 11:51:02,423 [INFO] Signal generated for BTCUSDT: SignalType.BUY LONG
SIGNAL: BTCUSDT SignalType.BUY LONG
Validating trade for BTCUSDT...
TEST MODE: All trades allowed for testing
Executing signal for BTCUSDT...
Executing signal for BTCUSDT...
Current price for BTCUSDT: 102907.0
Using fixed position size: 0.01
Order side: Buy, direction: LONG
Placing Buy market order for BTCUSDT without TP/SL
2025-06-20 11:51:02 [TradingEngine] INFO: Entering LONG position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:51:02,577 [INFO] Entering LONG position for BTCUSDT, qty=0.01 (without TP/SL)
Engine status: Running=True, Active positions=0
2025-06-20 11:51:02 [TradingEngine] ERROR: Failed to place order: Unknown error
2025-06-20 11:51:02,732 [ERROR] Failed to place order: Unknown error
2025-06-20 11:51:02 [TradingEngine] INFO: LONG order result: {'orderId': 'ac081c26-4442-4bad-9e16-e755a8c70ea9', 'orderLinkId': ''}
2025-06-20 11:51:02,733 [INFO] LONG order result: {'orderId': 'ac081c26-4442-4bad-9e16-e755a8c70ea9', 'orderLinkId': ''}
Order not filled immediately, will set TP/SL after fill confirmation
2025-06-20 11:51:02 [TradingEngine] INFO: Order executed for BTCUSDT Buy: ac081c26-4442-4bad-9e16-e755a8c70ea9
2025-06-20 11:51:02,734 [INFO] Order executed for BTCUSDT Buy: ac081c26-4442-4bad-9e16-e755a8c70ea9
SUCCESS: Order executed for BTCUSDT Buy: ac081c26-4442-4bad-9e16-e755a8c70ea9
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
2025-06-20 11:51:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:51:02,739 [INFO] Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:51:03 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:51:03,090 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:51:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384200000', '102907', '102907', '102907', '102907', '0', '0'], ['1750383900000', '103139.6', '103139.6', '102907', '102907', '0.205', '21122.0188']]
2025-06-20 11:51:03,090 [INFO] Klines response type: <class 'list'>, data: [['1750384200000', '102907', '102907', '102907', '102907', '0', '0'], ['1750383900000', '103139.6', '103139.6', '102907', '102907', '0.205', '21122.0188']]
Updated data cache for BTCUSDT 5m
New data received for BTCUSDT 5m
Running strategies for BTCUSDT 5m
2025-06-20 11:51:03 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['5m']
2025-06-20 11:51:03,094 [INFO] Processing data for BTCUSDT with timeframes: ['5m']
2025-06-20 11:51:03 [StrategyB] WARNING: Not enough data for BTCUSDT 1m
2025-06-20 11:51:03,094 [WARNING] Not enough data for BTCUSDT 1m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
2025-06-20 11:51:03 [TradingEngine] INFO: Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:51:03,096 [INFO] Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:51:03 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:51:03,446 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:51:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.097', '113009.3127'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
2025-06-20 11:51:03,447 [INFO] Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.097', '113009.3127'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
2025-06-20 11:51:03 [TradingEngine] INFO: Checking 1 pending TP/SL orders
2025-06-20 11:51:03,449 [INFO] Checking 1 pending TP/SL orders
2025-06-20 11:51:03 [TradingEngine] INFO: Getting order info for ac081c26-4442-4bad-9e16-e755a8c70ea9 on BTCUSDT
2025-06-20 11:51:03,449 [INFO] Getting order info for ac081c26-4442-4bad-9e16-e755a8c70ea9 on BTCUSDT
2025-06-20 11:51:03 [TradingEngine] INFO: Order ac081c26-4442-4bad-9e16-e755a8c70ea9 filled, setting TP/SL
2025-06-20 11:51:03,806 [INFO] Order ac081c26-4442-4bad-9e16-e755a8c70ea9 filled, setting TP/SL
Engine status: Running=True, Active positions=0
2025-06-20 11:51:04 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=20
2025-06-20 11:51:04,165 [INFO] Fetching kline data for BTCUSDT 1, limit=20
2025-06-20 11:51:04 [TradingEngine] INFO: Retrieved 20 klines for BTCUSDT
2025-06-20 11:51:04,518 [INFO] Retrieved 20 klines for BTCUSDT
2025-06-20 11:51:04 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384260000', '102907', '103139.6', '102907', '103139.6', '0.031', '3197.0989'], ['1750384200000', '102907', '102907', '102907', '102907', '0', '0']]
2025-06-20 11:51:04,518 [INFO] Klines response type: <class 'list'>, data: [['1750384260000', '102907', '103139.6', '102907', '103139.6', '0.031', '3197.0989'], ['1750384200000', '102907', '102907', '102907', '102907', '0', '0']]
2025-06-20 11:51:04 [TradingEngine] INFO: Calculated ATR from historical data: 193.71428571429195
2025-06-20 11:51:04,524 [INFO] Calculated ATR from historical data: 193.71428571429195
2025-06-20 11:51:04 [TradingEngine] INFO: Setting TP/SL for filled order ac081c26-4442-4bad-9e16-e755a8c70ea9
2025-06-20 11:51:04,524 [INFO] Setting TP/SL for filled order ac081c26-4442-4bad-9e16-e755a8c70ea9
2025-06-20 11:51:04 [TradingEngine] INFO: Getting order info for ac081c26-4442-4bad-9e16-e755a8c70ea9 on BTCUSDT
2025-06-20 11:51:04,525 [INFO] Getting order info for ac081c26-4442-4bad-9e16-e755a8c70ea9 on BTCUSDT
2025-06-20 11:51:04 [TradingEngine] INFO: Fill info for ac081c26-4442-4bad-9e16-e755a8c70ea9: {'filled': True, 'fill_price': 103116.73, 'side': 'Buy', 'position_idx': 0}
2025-06-20 11:51:04,881 [INFO] Fill info for ac081c26-4442-4bad-9e16-e755a8c70ea9: {'filled': True, 'fill_price': 103116.73, 'side': 'Buy', 'position_idx': 0}
2025-06-20 11:51:05 [TradingEngine] INFO: Final TP/SL for BTCUSDT LONG: TP=103891.59, SL=102729.30, Mark Price=103139.6
2025-06-20 11:51:05,029 [INFO] Final TP/SL for BTCUSDT LONG: TP=103891.59, SL=102729.30, Mark Price=103139.6
Engine status: Running=True, Active positions=0
2025-06-20 11:51:05 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:51:05,181 [WARNING] Error setting trading stop (attempt 1/3): No response
2025-06-20 11:51:05 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:51:05,827 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:51:06 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:51:06,976 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:51:06 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:51:06,977 [ERROR] Failed to set trading stop after 3 attempts
Updating position cache
Updating position cache...
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '103116.73', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '103891.5', 'positionValue': '1031.1673', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '0.2287', 'markPrice': '103139.6', 'adlRankIndicator': 2, 'cumRealisedPnl': '-739.28344751', 'positionMM': '5.1558365', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '1031.1673', 'seq': 9481049625, 'updatedTime': '1750384265115', 'side': 'Buy', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '-0.56714202', 'size': '0.01', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '102729.3', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
2025-06-20 11:51:07 [TradingEngine] INFO: Getting order info for ac081c26-4442-4bad-9e16-e755a8c70ea9 on BTCUSDT
2025-06-20 11:51:07,135 [INFO] Getting order info for ac081c26-4442-4bad-9e16-e755a8c70ea9 on BTCUSDT
2025-06-20 11:51:07 [TradingEngine] INFO: Fill info for ac081c26-4442-4bad-9e16-e755a8c70ea9: {'filled': True, 'fill_price': 103116.73, 'side': 'Buy', 'position_idx': 0}
2025-06-20 11:51:07,291 [INFO] Fill info for ac081c26-4442-4bad-9e16-e755a8c70ea9: {'filled': True, 'fill_price': 103116.73, 'side': 'Buy', 'position_idx': 0}
Pending order ac081c26-4442-4bad-9e16-e755a8c70ea9 filled at 103116.73, setting TP/SL
Setting TP/SL for filled order ac081c26-4442-4bad-9e16-e755a8c70ea9 at price 103116.73
ATR not found in data cache, calculating approximation
Calculated average range as ATR approximation: 116.30000000000291
Using ATR value: 116.30000000000291 for TP/SL calculation
Engine status: Running=True, Active positions=0
Calculated TP/SL for BTCUSDT LONG: TP=103581.93, SL=102884.13
2025-06-20 11:51:07 [TradingEngine] INFO: Setting TP/SL for BTCUSDT position: TP=103581.93, SL=102884.13
2025-06-20 11:51:07,646 [INFO] Setting TP/SL for BTCUSDT position: TP=103581.93, SL=102884.13
2025-06-20 11:51:08 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:51:08,252 [WARNING] Error setting trading stop (attempt 1/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:51:09 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:51:09,113 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:51:10 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:51:10,584 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:51:10 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:51:10,585 [ERROR] Failed to set trading stop after 3 attempts
2025-06-20 11:51:10 [TradingEngine] INFO: Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:51:10,586 [INFO] Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:51:10 [TradingEngine] ERROR: Error setting TP/SL: Failed after 3 attempts
2025-06-20 11:51:10,586 [ERROR] Error setting TP/SL: Failed after 3 attempts
ERROR setting TP/SL: Failed after 3 attempts
Waiting 51 seconds until next minute close
2025-06-20 11:51:11 [TradingEngine] INFO: Waiting 51 seconds until next minute close
2025-06-20 11:51:11,038 [INFO] Waiting 51 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
2025-06-20 11:52:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:52:02,047 [INFO] Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:52:02 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:52:02,191 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:52:02 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384320000', '103139.6', '103139.6', '103139.6', '103139.6', '0', '0'], ['1750384260000', '102907', '103139.6', '102907', '103139.6', '0.06', '6188.1473']]
2025-06-20 11:52:02,192 [INFO] Klines response type: <class 'list'>, data: [['1750384320000', '103139.6', '103139.6', '103139.6', '103139.6', '0', '0'], ['1750384260000', '102907', '103139.6', '102907', '103139.6', '0.06', '6188.1473']]
Updated data cache for BTCUSDT 1m
New data received for BTCUSDT 1m
Running strategies for BTCUSDT 1m
2025-06-20 11:52:02 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:52:02,196 [INFO] Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:52:02 [StrategyB] INFO: Latest candle for BTCUSDT 1m:
2025-06-20 11:52:02,199 [INFO] Latest candle for BTCUSDT 1m:
2025-06-20 11:52:02 [StrategyB] INFO: - Time: 2025-06-20 10:13:00 (Minute: 13)
2025-06-20 11:52:02,200 [INFO] - Time: 2025-06-20 10:13:00 (Minute: 13)
2025-06-20 11:52:02 [StrategyB] INFO: - Price: 103139.60
2025-06-20 11:52:02,200 [INFO] - Price: 103139.60
2025-06-20 11:52:02 [StrategyB] INFO: - Even minute: False
2025-06-20 11:52:02,200 [INFO] - Even minute: False
2025-06-20 11:52:02 [StrategyB] INFO: FORCING SELL signal (alternating from previous BUY)
2025-06-20 11:52:02,202 [INFO] FORCING SELL signal (alternating from previous BUY)
2025-06-20 11:52:02 [StrategyB] INFO: Minute 13 is odd, generating SHORT signal
2025-06-20 11:52:02,202 [INFO] Minute 13 is odd, generating SHORT signal
2025-06-20 11:52:02 [StrategyB] INFO: Generated 1 signals for BTCUSDT
2025-06-20 11:52:02,202 [INFO] Generated 1 signals for BTCUSDT
2025-06-20 11:52:02 [StrategyB] INFO: Signal: SignalType.SELL at price 103139.6 with SL=103473.31, TP=102472.17
2025-06-20 11:52:02,204 [INFO] Signal: SignalType.SELL at price 103139.6 with SL=103473.31, TP=102472.17
2025-06-20 11:52:02 [TradingEngine] INFO: ======= BTCUSDT 1m CLOSE at 2025-06-20 00:13:00 =======
2025-06-20 11:52:02,205 [INFO] ======= BTCUSDT 1m CLOSE at 2025-06-20 00:13:00 =======
2025-06-20 11:52:02 [TradingEngine] INFO: OHLCV: Open=103129.60, High=103139.60, Low=103129.60, Close=103139.60, Volume=0.01
2025-06-20 11:52:02,205 [INFO] OHLCV: Open=103129.60, High=103139.60, Low=103129.60, Close=103139.60, Volume=0.01
Processed BTCUSDT 1m candle close at 2025-06-20 00:13:00
Received 1 signals for BTCUSDT
2025-06-20 11:52:02 [TradingEngine] INFO: Signal generated for BTCUSDT: SignalType.SELL SHORT
2025-06-20 11:52:02,205 [INFO] Signal generated for BTCUSDT: SignalType.SELL SHORT
SIGNAL: BTCUSDT SignalType.SELL SHORT
Validating trade for BTCUSDT...
TEST MODE: All trades allowed for testing
Executing signal for BTCUSDT...
Executing signal for BTCUSDT...
Engine status: Running=True, Active positions=0
Current price for BTCUSDT: 103139.6
Using fixed position size: 0.01
Order side: Sell, direction: SHORT
Placing Sell market order for BTCUSDT without TP/SL
2025-06-20 11:52:02 [TradingEngine] INFO: Entering SHORT position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:52:02,554 [INFO] Entering SHORT position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:52:02 [TradingEngine] ERROR: Failed to place order: Unknown error
2025-06-20 11:52:02,908 [ERROR] Failed to place order: Unknown error
2025-06-20 11:52:02 [TradingEngine] INFO: SHORT order result: {'orderId': '48c802d6-a8e5-4b25-9542-112eff7cf709', 'orderLinkId': ''}
2025-06-20 11:52:02,908 [INFO] SHORT order result: {'orderId': '48c802d6-a8e5-4b25-9542-112eff7cf709', 'orderLinkId': ''}
Order not filled immediately, will set TP/SL after fill confirmation
2025-06-20 11:52:02 [TradingEngine] INFO: Order executed for BTCUSDT Sell: 48c802d6-a8e5-4b25-9542-112eff7cf709
2025-06-20 11:52:02,908 [INFO] Order executed for BTCUSDT Sell: 48c802d6-a8e5-4b25-9542-112eff7cf709
SUCCESS: Order executed for BTCUSDT Sell: 48c802d6-a8e5-4b25-9542-112eff7cf709
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
2025-06-20 11:52:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:52:02,911 [INFO] Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:52:03 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:52:03,360 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:52:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384200000', '102907', '103139.6', '102907', '103139.6', '0.06', '6188.1473'], ['1750383900000', '103139.6', '103139.6', '102907', '102907', '0.205', '21122.0188']]
2025-06-20 11:52:03,361 [INFO] Klines response type: <class 'list'>, data: [['1750384200000', '102907', '103139.6', '102907', '103139.6', '0.06', '6188.1473'],['1750383900000', '103139.6', '103139.6', '102907', '102907', '0.205', '21122.0188']]
No new data for BTCUSDT 5m
No new data for BTCUSDT 5m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
2025-06-20 11:52:03 [TradingEngine] INFO: Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:52:03,366 [INFO] Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:52:03 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:52:03,508 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:52:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.167', '120226.5928'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
2025-06-20 11:52:03,509 [INFO] Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.167', '120226.5928'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
2025-06-20 11:52:03 [TradingEngine] INFO: Checking 1 pending TP/SL orders
2025-06-20 11:52:03,511 [INFO] Checking 1 pending TP/SL orders
2025-06-20 11:52:03 [TradingEngine] INFO: Getting order info for 48c802d6-a8e5-4b25-9542-112eff7cf709 on BTCUSDT
2025-06-20 11:52:03,512 [INFO] Getting order info for 48c802d6-a8e5-4b25-9542-112eff7cf709 on BTCUSDT
Engine status: Running=True, Active positions=0
2025-06-20 11:52:04 [TradingEngine] INFO: Order 48c802d6-a8e5-4b25-9542-112eff7cf709 filled, setting TP/SL
2025-06-20 11:52:04,015 [INFO] Order 48c802d6-a8e5-4b25-9542-112eff7cf709 filled, setting TP/SL
2025-06-20 11:52:04 [TradingEngine] WARNING: No open position for 48c802d6-a8e5-4b25-9542-112eff7cf709, skipping TP/SL
2025-06-20 11:52:04,161 [WARNING] No open position for 48c802d6-a8e5-4b25-9542-112eff7cf709, skipping TP/SL
Updating position cache
Updating position cache...
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '0', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '', 'positionValue': '', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '', 'markPrice': '103023.52', 'adlRankIndicator': 0, 'cumRealisedPnl': '-741.88397055', 'positionMM': '0', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '0', 'seq': 9481049817, 'updatedTime': '1750384322844', 'side': '', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '0', 'size': '0', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
2025-06-20 11:52:04 [TradingEngine] INFO: Getting order info for 48c802d6-a8e5-4b25-9542-112eff7cf709 on BTCUSDT
2025-06-20 11:52:04,512 [INFO] Getting order info for 48c802d6-a8e5-4b25-9542-112eff7cf709 on BTCUSDT
2025-06-20 11:52:04 [TradingEngine] INFO: Fill info for 48c802d6-a8e5-4b25-9542-112eff7cf709: {'filled': True, 'fill_price': 102913.28, 'side': 'Sell', 'position_idx': 0}
2025-06-20 11:52:04,662 [INFO] Fill info for 48c802d6-a8e5-4b25-9542-112eff7cf709: {'filled': True, 'fill_price': 102913.28, 'side': 'Sell', 'position_idx': 0}
Pending order 48c802d6-a8e5-4b25-9542-112eff7cf709 filled at 102913.28, setting TP/SL
Setting TP/SL for filled order 48c802d6-a8e5-4b25-9542-112eff7cf709 at price 102913.28
ATR not found in data cache, calculating approximation
Calculated average range as ATR approximation: 100.40000000000249
Using ATR value: 100.40000000000249 for TP/SL calculation
Calculated TP/SL for BTCUSDT SHORT: TP=102511.68, SL=103114.08
2025-06-20 11:52:04 [TradingEngine] INFO: Setting TP/SL for BTCUSDT position: TP=102511.68, SL=103114.08
2025-06-20 11:52:04,811 [INFO] Setting TP/SL for BTCUSDT position: TP=102511.68, SL=103114.08
Engine status: Running=True, Active positions=0
2025-06-20 11:52:05 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:52:05,717 [WARNING] Error setting trading stop (attempt 1/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:52:06 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:52:06,365 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:52:07 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:52:07,529 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:52:07 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:52:07,531 [ERROR] Failed to set trading stop after 3 attempts
2025-06-20 11:52:07 [TradingEngine] INFO: Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:52:07,531 [INFO] Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:52:07 [TradingEngine] ERROR: Error setting TP/SL: Failed after 3 attempts
2025-06-20 11:52:07,532 [ERROR] Error setting TP/SL: Failed after 3 attempts
ERROR setting TP/SL: Failed after 3 attempts
Waiting 54 seconds until next minute close
2025-06-20 11:52:07 [TradingEngine] INFO: Waiting 54 seconds until next minute close
2025-06-20 11:52:07,677 [INFO] Waiting 54 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
No new data for BTCUSDT 1m
No new data for BTCUSDT 1m
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
No new data for BTCUSDT 5m
No new data for BTCUSDT 5m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
Updating position cache
Updating position cache...
Engine status: Running=True, Active positions=0
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '0', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '', 'positionValue': '', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '', 'markPrice': '103139.6', 'adlRankIndicator': 0, 'cumRealisedPnl': '-741.88397055', 'positionMM': '0', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '0', 'seq': 9481049817, 'updatedTime': '1750384322844', 'side': '', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '0', 'size': '0', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
Waiting 59 seconds until next minute close
2025-06-20 11:53:02 [TradingEngine] INFO: Waiting 59 seconds until next minute close
2025-06-20 11:53:02,389 [INFO] Waiting 59 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
2025-06-20 11:54:01 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:54:01,403 [INFO] Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:54:01 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:54:01,555 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:54:01 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384440000', '103139.6', '103139.6', '103139.6', '103139.6', '0', '0'], ['1750384380000', '103139.6', '103139.6', '103129.6', '103139.6', '0.078', '8044.8788']]
2025-06-20 11:54:01,555 [INFO] Klines response type: <class 'list'>, data: [['1750384440000', '103139.6', '103139.6', '103139.6', '103139.6', '0', '0'], ['1750384380000', '103139.6', '103139.6', '103129.6', '103139.6', '0.078', '8044.8788']]
Updated data cache for BTCUSDT 1m
New data received for BTCUSDT 1m
Running strategies for BTCUSDT 1m
2025-06-20 11:54:01 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:54:01,558 [INFO] Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:54:01 [StrategyB] INFO: Latest candle for BTCUSDT 1m:
2025-06-20 11:54:01,560 [INFO] Latest candle for BTCUSDT 1m:
2025-06-20 11:54:01 [StrategyB] INFO: - Time: 2025-06-20 10:15:00 (Minute: 15)
2025-06-20 11:54:01,561 [INFO] - Time: 2025-06-20 10:15:00 (Minute: 15)
2025-06-20 11:54:01 [StrategyB] INFO: - Price: 102907.00
2025-06-20 11:54:01,561 [INFO] - Price: 102907.00
2025-06-20 11:54:01 [StrategyB] INFO: - Even minute: False
2025-06-20 11:54:01,561 [INFO] - Even minute: False
2025-06-20 11:54:01 [StrategyB] INFO: FORCING BUY signal (alternating from previous SELL)
2025-06-20 11:54:01,562 [INFO] FORCING BUY signal (alternating from previous SELL)
2025-06-20 11:54:01 [StrategyB] INFO: Minute 15 is even, generating LONG signal
2025-06-20 11:54:01,562 [INFO] Minute 15 is even, generating LONG signal
2025-06-20 11:54:01 [StrategyB] INFO: Generated 1 signals for BTCUSDT
2025-06-20 11:54:01,562 [INFO] Generated 1 signals for BTCUSDT
2025-06-20 11:54:01 [StrategyB] INFO: Signal: SignalType.BUY at price 102907.0 with SL=102541.49, TP=103638.03
2025-06-20 11:54:01,562 [INFO] Signal: SignalType.BUY at price 102907.0 with SL=102541.49, TP=103638.03
2025-06-20 11:54:01 [TradingEngine] INFO: ======= BTCUSDT 1m CLOSE at 2025-06-20 00:15:00 =======
2025-06-20 11:54:01,564 [INFO] ======= BTCUSDT 1m CLOSE at 2025-06-20 00:15:00 =======
2025-06-20 11:54:01 [TradingEngine] INFO: OHLCV: Open=103139.60, High=103139.60, Low=102907.00, Close=102907.00, Volume=0.05
2025-06-20 11:54:01,564 [INFO] OHLCV: Open=103139.60, High=103139.60, Low=102907.00, Close=102907.00, Volume=0.05
Processed BTCUSDT 1m candle close at 2025-06-20 00:15:00
Received 1 signals for BTCUSDT
2025-06-20 11:54:01 [TradingEngine] INFO: Signal generated for BTCUSDT: SignalType.BUY LONG
2025-06-20 11:54:01,565 [INFO] Signal generated for BTCUSDT: SignalType.BUY LONG
SIGNAL: BTCUSDT SignalType.BUY LONG
Validating trade for BTCUSDT...
TEST MODE: All trades allowed for testing
Executing signal for BTCUSDT...
Executing signal for BTCUSDT...
Current price for BTCUSDT: 103139.6
Using fixed position size: 0.01
Order side: Buy, direction: LONG
Placing Buy market order for BTCUSDT without TP/SL
2025-06-20 11:54:01 [TradingEngine] INFO: Entering LONG position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:54:01,710 [INFO] Entering LONG position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:54:01 [TradingEngine] ERROR: Failed to place order: Unknown error
2025-06-20 11:54:01,862 [ERROR] Failed to place order: Unknown error
2025-06-20 11:54:01 [TradingEngine] INFO: LONG order result: {'orderId': '97a176aa-2e56-41d5-a535-67c9b46d21c4', 'orderLinkId': ''}
2025-06-20 11:54:01,862 [INFO] LONG order result: {'orderId': '97a176aa-2e56-41d5-a535-67c9b46d21c4', 'orderLinkId': ''}
Order not filled immediately, will set TP/SL after fill confirmation
2025-06-20 11:54:01 [TradingEngine] INFO: Order executed for BTCUSDT Buy: 97a176aa-2e56-41d5-a535-67c9b46d21c4
2025-06-20 11:54:01,862 [INFO] Order executed for BTCUSDT Buy: 97a176aa-2e56-41d5-a535-67c9b46d21c4
SUCCESS: Order executed for BTCUSDT Buy: 97a176aa-2e56-41d5-a535-67c9b46d21c4
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
2025-06-20 11:54:01 [TradingEngine] INFO: Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:54:01,865 [INFO] Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:54:02 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:54:02,010 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:54:02 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384200000', '102907', '103139.6', '102907', '103139.6', '0.16', '16499.6054'], ['1750383900000', '103139.6', '103139.6', '102907', '102907', '0.205', '21122.0188']]
2025-06-20 11:54:02,010 [INFO] Klines response type: <class 'list'>, data: [['1750384200000', '102907', '103139.6', '102907', '103139.6', '0.16', '16499.6054'], ['1750383900000', '103139.6', '103139.6', '102907', '102907', '0.205', '21122.0188']]
No new data for BTCUSDT 5m
No new data for BTCUSDT 5m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
2025-06-20 11:54:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:54:02,015 [INFO] Fetching kline data for BTCUSDT 60, limit=100
Engine status: Running=True, Active positions=0
2025-06-20 11:54:02 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:54:02,363 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:54:02 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '103139.6', '1.257','129508.9181'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
2025-06-20 11:54:02,364 [INFO] Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '103139.6', '1.257', '129508.9181'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
2025-06-20 11:54:02 [TradingEngine] INFO: Checking 1 pending TP/SL orders
2025-06-20 11:54:02,367 [INFO] Checking 1 pending TP/SL orders
2025-06-20 11:54:02 [TradingEngine] INFO: Getting order info for 97a176aa-2e56-41d5-a535-67c9b46d21c4 on BTCUSDT
2025-06-20 11:54:02,367 [INFO] Getting order info for 97a176aa-2e56-41d5-a535-67c9b46d21c4 on BTCUSDT
2025-06-20 11:54:02 [TradingEngine] INFO: Order 97a176aa-2e56-41d5-a535-67c9b46d21c4 filled, setting TP/SL
2025-06-20 11:54:02,522 [INFO] Order 97a176aa-2e56-41d5-a535-67c9b46d21c4 filled, setting TP/SL
2025-06-20 11:54:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=20
2025-06-20 11:54:02,872 [INFO] Fetching kline data for BTCUSDT 1, limit=20
2025-06-20 11:54:03 [TradingEngine] INFO: Retrieved 20 klines for BTCUSDT
2025-06-20 11:54:03,221 [INFO] Retrieved 20 klines for BTCUSDT
2025-06-20 11:54:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384440000', '103139.6', '103139.6', '103139.6', '103139.6', '0.01', '1031.396'], ['1750384380000', '103139.6', '103139.6', '103129.6', '103139.6', '0.078', '8044.8788']]
2025-06-20 11:54:03,222 [INFO] Klines response type: <class 'list'>, data: [['1750384440000', '103139.6', '103139.6', '103139.6', '103139.6', '0.01', '1031.396'], ['1750384380000', '103139.6', '103139.6', '103129.6', '103139.6', '0.078', '8044.8788']]
2025-06-20 11:54:03 [TradingEngine] INFO: Calculated ATR from historical data: 193.71428571429195
2025-06-20 11:54:03,224 [INFO] Calculated ATR from historical data: 193.71428571429195
2025-06-20 11:54:03 [TradingEngine] INFO: Setting TP/SL for filled order 97a176aa-2e56-41d5-a535-67c9b46d21c4
2025-06-20 11:54:03,224 [INFO] Setting TP/SL for filled order 97a176aa-2e56-41d5-a535-67c9b46d21c4
2025-06-20 11:54:03 [TradingEngine] INFO: Getting order info for 97a176aa-2e56-41d5-a535-67c9b46d21c4 on BTCUSDT
2025-06-20 11:54:03,226 [INFO] Getting order info for 97a176aa-2e56-41d5-a535-67c9b46d21c4 on BTCUSDT
2025-06-20 11:54:03 [TradingEngine] INFO: Fill info for 97a176aa-2e56-41d5-a535-67c9b46d21c4: {'filled': True, 'fill_price': 103139.6, 'side': 'Buy', 'position_idx': 0}
2025-06-20 11:54:03,375 [INFO] Fill info for 97a176aa-2e56-41d5-a535-67c9b46d21c4: {'filled': True, 'fill_price': 103139.6, 'side': 'Buy', 'position_idx': 0}
Engine status: Running=True, Active positions=0
2025-06-20 11:54:03 [TradingEngine] INFO: Final TP/SL for BTCUSDT LONG: TP=103914.46, SL=102752.17, Mark Price=103139.6
2025-06-20 11:54:03,728 [INFO] Final TP/SL for BTCUSDT LONG: TP=103914.46, SL=102752.17, Mark Price=103139.6
2025-06-20 11:54:03 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:54:03,872 [WARNING] Error setting trading stop (attempt 1/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:54:04 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:54:04,723 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:54:05 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:54:05,873 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:54:05 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:54:05,875 [ERROR] Failed to set trading stop after 3 attempts
Updating position cache
Updating position cache...
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '103139.6', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '103914.4', 'positionValue': '1031.396', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '0', 'markPrice': '103139.6', 'adlRankIndicator': 2, 'cumRealisedPnl': '-742.45123835', 'positionMM': '5.15698', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '1031.396', 'seq': 9481050096, 'updatedTime': '1750384443811', 'side': 'Buy', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '-0.5672678', 'size': '0.01', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '102752.1', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
2025-06-20 11:54:06 [TradingEngine] INFO: Getting order info for 97a176aa-2e56-41d5-a535-67c9b46d21c4 on BTCUSDT
2025-06-20 11:54:06,020 [INFO] Getting order info for 97a176aa-2e56-41d5-a535-67c9b46d21c4 on BTCUSDT
2025-06-20 11:54:06 [TradingEngine] INFO: Fill info for 97a176aa-2e56-41d5-a535-67c9b46d21c4: {'filled': True, 'fill_price': 103139.6, 'side': 'Buy', 'position_idx': 0}
2025-06-20 11:54:06,374 [INFO] Fill info for 97a176aa-2e56-41d5-a535-67c9b46d21c4: {'filled': True, 'fill_price': 103139.6, 'side': 'Buy', 'position_idx': 0}
Pending order 97a176aa-2e56-41d5-a535-67c9b46d21c4 filled at 103139.6, setting TP/SL
Setting TP/SL for filled order 97a176aa-2e56-41d5-a535-67c9b46d21c4 at price 103139.6
ATR not found in data cache, calculating approximation
Calculated average range as ATR approximation: 116.30000000000291
Using ATR value: 116.30000000000291 for TP/SL calculation
Calculated TP/SL for BTCUSDT LONG: TP=103604.8, SL=102907.0
2025-06-20 11:54:06 [TradingEngine] INFO: Setting TP/SL for BTCUSDT position: TP=103604.8, SL=102907.0
2025-06-20 11:54:06,730 [INFO] Setting TP/SL for BTCUSDT position: TP=103604.8, SL=102907.0
Engine status: Running=True, Active positions=0
2025-06-20 11:54:07 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:54:07,224 [WARNING] Error setting trading stop (attempt 1/3): No response
2025-06-20 11:54:07 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:54:07,871 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:54:09 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:54:09,025 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:54:09 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:54:09,026 [ERROR] Failed to set trading stop after 3 attempts
2025-06-20 11:54:09 [TradingEngine] INFO: Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:54:09,026 [INFO] Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:54:09 [TradingEngine] ERROR: Error setting TP/SL: Failed after 3 attempts
2025-06-20 11:54:09,026 [ERROR] Error setting TP/SL: Failed after 3 attempts
ERROR setting TP/SL: Failed after 3 attempts
Waiting 52 seconds until next minute close
2025-06-20 11:54:09 [TradingEngine] INFO: Waiting 52 seconds until next minute close
2025-06-20 11:54:09,168 [INFO] Waiting 52 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
No new data for BTCUSDT 1m
No new data for BTCUSDT 1m
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
No new data for BTCUSDT 5m
No new data for BTCUSDT 5m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
Updating position cache
Updating position cache...
Engine status: Running=True, Active positions=0
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '103139.6', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '103604.8', 'positionValue': '1031.396', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '0', 'markPrice': '103139.6', 'adlRankIndicator': 2, 'cumRealisedPnl': '-742.45123835', 'positionMM': '5.15698', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '1031.396', 'seq': 9481050096, 'updatedTime': '1750384447163', 'side': 'Buy', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '-0.5672678', 'size': '0.01', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '102907', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
Waiting 60 seconds until next minute close
2025-06-20 11:55:01 [TradingEngine] INFO: Waiting 60 seconds until next minute close
2025-06-20 11:55:01,877 [INFO] Waiting 60 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
2025-06-20 11:56:01 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:56:01,881 [INFO] Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:56:02 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:56:02,334 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:56:02 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384560000', '103139.6', '103139.6', '103139.6', '103139.6', '0', '0'], ['1750384500000', '103139.6', '103139.6', '103139.6', '103139.6', '0', '0']]
2025-06-20 11:56:02,335 [INFO] Klines response type: <class 'list'>, data: [['1750384560000', '103139.6', '103139.6', '103139.6', '103139.6', '0', '0'], ['1750384500000', '103139.6', '103139.6', '103139.6', '103139.6', '0', '0']]
Updated data cache for BTCUSDT 1m
New data received for BTCUSDT 1m
Running strategies for BTCUSDT 1m
2025-06-20 11:56:02 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:56:02,347 [INFO] Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:56:02 [StrategyB] INFO: Latest candle for BTCUSDT 1m:
2025-06-20 11:56:02,356 [INFO] Latest candle for BTCUSDT 1m:
2025-06-20 11:56:02 [StrategyB] INFO: - Time: 2025-06-20 10:17:00 (Minute: 17)
2025-06-20 11:56:02,357 [INFO] - Time: 2025-06-20 10:17:00 (Minute: 17)
2025-06-20 11:56:02 [StrategyB] INFO: - Price: 103139.60
2025-06-20 11:56:02,359 [INFO] - Price: 103139.60
2025-06-20 11:56:02 [StrategyB] INFO: - Even minute: False
2025-06-20 11:56:02,360 [INFO] - Even minute: False
2025-06-20 11:56:02 [StrategyB] INFO: FORCING SELL signal (alternating from previous BUY)
2025-06-20 11:56:02,362 [INFO] FORCING SELL signal (alternating from previous BUY)
2025-06-20 11:56:02 [StrategyB] INFO: Minute 17 is odd, generating SHORT signal
2025-06-20 11:56:02,363 [INFO] Minute 17 is odd, generating SHORT signal
2025-06-20 11:56:02 [StrategyB] INFO: Generated 1 signals for BTCUSDT
2025-06-20 11:56:02,364 [INFO] Generated 1 signals for BTCUSDT
2025-06-20 11:56:02 [StrategyB] INFO: Signal: SignalType.SELL at price 103139.6 with SL=103473.31, TP=102472.17
2025-06-20 11:56:02,365 [INFO] Signal: SignalType.SELL at price 103139.6 with SL=103473.31, TP=102472.17
2025-06-20 11:56:02 [TradingEngine] INFO: ======= BTCUSDT 1m CLOSE at 2025-06-20 00:17:00 =======
2025-06-20 11:56:02,368 [INFO] ======= BTCUSDT 1m CLOSE at 2025-06-20 00:17:00 =======
2025-06-20 11:56:02 [TradingEngine] INFO: OHLCV: Open=102907.00, High=103139.60, Low=102907.00, Close=103139.60, Volume=0.01
2025-06-20 11:56:02,369 [INFO] OHLCV: Open=102907.00, High=103139.60, Low=102907.00, Close=103139.60, Volume=0.01
Processed BTCUSDT 1m candle close at 2025-06-20 00:17:00
Received 1 signals for BTCUSDT
2025-06-20 11:56:02 [TradingEngine] INFO: Signal generated for BTCUSDT: SignalType.SELL SHORT
2025-06-20 11:56:02,371 [INFO] Signal generated for BTCUSDT: SignalType.SELL SHORT
SIGNAL: BTCUSDT SignalType.SELL SHORT
Validating trade for BTCUSDT...
TEST MODE: All trades allowed for testing
Executing signal for BTCUSDT...
Executing signal for BTCUSDT...
Current price for BTCUSDT: 103139.6
Using fixed position size: 0.01
Order side: Sell, direction: SHORT
Placing Sell market order for BTCUSDT without TP/SL
2025-06-20 11:56:02 [TradingEngine] INFO: Entering SHORT position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:56:02,738 [INFO] Entering SHORT position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:56:02 [TradingEngine] ERROR: Failed to place order: Unknown error
2025-06-20 11:56:02,889 [ERROR] Failed to place order: Unknown error
2025-06-20 11:56:02 [TradingEngine] INFO: SHORT order result: {'orderId': 'cee03457-788f-46d1-b181-e3a5d1d5b396', 'orderLinkId': ''}
2025-06-20 11:56:02,890 [INFO] SHORT order result: {'orderId': 'cee03457-788f-46d1-b181-e3a5d1d5b396', 'orderLinkId': ''}
Order not filled immediately, will set TP/SL after fill confirmation
2025-06-20 11:56:02 [TradingEngine] INFO: Order executed for BTCUSDT Sell: cee03457-788f-46d1-b181-e3a5d1d5b396
2025-06-20 11:56:02,891 [INFO] Order executed for BTCUSDT Sell: cee03457-788f-46d1-b181-e3a5d1d5b396
SUCCESS: Order executed for BTCUSDT Sell: cee03457-788f-46d1-b181-e3a5d1d5b396
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
2025-06-20 11:56:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:56:02,901 [INFO] Fetching kline data for BTCUSDT 5, limit=100
Engine status: Running=True, Active positions=0
2025-06-20 11:56:03 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:56:03,252 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:56:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384500000', '103139.6', '103139.6', '103139.6', '103139.6', '0', '0'], ['1750384200000', '102907', '103139.6', '102907', '103139.6', '0.17', '17531.0014']]
2025-06-20 11:56:03,253 [INFO] Klines response type: <class 'list'>, data: [['1750384500000', '103139.6', '103139.6', '103139.6', '103139.6', '0', '0'], ['1750384200000', '102907', '103139.6', '102907', '103139.6', '0.17', '17531.0014']]
Updated data cache for BTCUSDT 5m
New data received for BTCUSDT 5m
Running strategies for BTCUSDT 5m
2025-06-20 11:56:03 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['5m']
2025-06-20 11:56:03,266 [INFO] Processing data for BTCUSDT with timeframes: ['5m']
2025-06-20 11:56:03 [StrategyB] WARNING: Not enough data for BTCUSDT 1m
2025-06-20 11:56:03,267 [WARNING] Not enough data for BTCUSDT 1m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
2025-06-20 11:56:03 [TradingEngine] INFO: Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:56:03,275 [INFO] Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:56:03 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:56:03,425 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:56:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '103139.6', '1.267','130540.3141'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
2025-06-20 11:56:03,426 [INFO] Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '103139.6', '1.267', '130540.3141'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
2025-06-20 11:56:03 [TradingEngine] INFO: Checking 1 pending TP/SL orders
2025-06-20 11:56:03,438 [INFO] Checking 1 pending TP/SL orders
2025-06-20 11:56:03 [TradingEngine] INFO: Getting order info for cee03457-788f-46d1-b181-e3a5d1d5b396 on BTCUSDT
2025-06-20 11:56:03,439 [INFO] Getting order info for cee03457-788f-46d1-b181-e3a5d1d5b396 on BTCUSDT
2025-06-20 11:56:03 [TradingEngine] INFO: Order cee03457-788f-46d1-b181-e3a5d1d5b396 filled, setting TP/SL
2025-06-20 11:56:03,592 [INFO] Order cee03457-788f-46d1-b181-e3a5d1d5b396 filled, setting TP/SL
2025-06-20 11:56:03 [TradingEngine] WARNING: No open position for cee03457-788f-46d1-b181-e3a5d1d5b396, skipping TP/SL
2025-06-20 11:56:03,738 [WARNING] No open position for cee03457-788f-46d1-b181-e3a5d1d5b396, skipping TP/SL
Updating position cache
Updating position cache...
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '0', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '', 'positionValue': '', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '', 'markPrice': '103073.14', 'adlRankIndicator': 0, 'cumRealisedPnl': '-745.25407591', 'positionMM': '0', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '0', 'seq': 9481050399, 'updatedTime': '1750384562833', 'side': '', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '0', 'size': '0', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
2025-06-20 11:56:03 [TradingEngine] INFO: Getting order info for cee03457-788f-46d1-b181-e3a5d1d5b396 on BTCUSDT
2025-06-20 11:56:03,889 [INFO] Getting order info for cee03457-788f-46d1-b181-e3a5d1d5b396 on BTCUSDT
2025-06-20 11:56:04 [TradingEngine] INFO: Fill info for cee03457-788f-46d1-b181-e3a5d1d5b396: {'filled': True, 'fill_price': 102915.92, 'side': 'Sell', 'position_idx': 0}
2025-06-20 11:56:04,043 [INFO] Fill info for cee03457-788f-46d1-b181-e3a5d1d5b396: {'filled': True, 'fill_price': 102915.92, 'side': 'Sell', 'position_idx': 0}
Pending order cee03457-788f-46d1-b181-e3a5d1d5b396 filled at 102915.92, setting TP/SL
Setting TP/SL for filled order cee03457-788f-46d1-b181-e3a5d1d5b396 at price 102915.92
ATR not found in data cache, calculating approximation
Calculated average range as ATR approximation: 117.01428571428862
Using ATR value: 117.01428571428862 for TP/SL calculation
Engine status: Running=True, Active positions=0
Calculated TP/SL for BTCUSDT SHORT: TP=102447.86, SL=103149.95
2025-06-20 11:56:04 [TradingEngine] INFO: Setting TP/SL for BTCUSDT position: TP=102447.86, SL=103149.95
2025-06-20 11:56:04,503 [INFO] Setting TP/SL for BTCUSDT position: TP=102447.86, SL=103149.95
2025-06-20 11:56:05 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:56:05,000 [WARNING] Error setting trading stop (attempt 1/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:56:05 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:56:05,961 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:56:07 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:56:07,110 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:56:07 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:56:07,111 [ERROR] Failed to set trading stop after 3 attempts
2025-06-20 11:56:07 [TradingEngine] INFO: Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:56:07,113 [INFO] Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:56:07 [TradingEngine] ERROR: Error setting TP/SL: Failed after 3 attempts
2025-06-20 11:56:07,114 [ERROR] Error setting TP/SL: Failed after 3 attempts
ERROR setting TP/SL: Failed after 3 attempts
Waiting 54 seconds until next minute close
2025-06-20 11:56:07 [TradingEngine] INFO: Waiting 54 seconds until next minute close
2025-06-20 11:56:07,464 [INFO] Waiting 54 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
No new data for BTCUSDT 1m
No new data for BTCUSDT 1m
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
No new data for BTCUSDT 5m
No new data for BTCUSDT 5m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
Updating position cache
Updating position cache...
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '0', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '', 'positionValue': '', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '', 'markPrice': '102990.38', 'adlRankIndicator': 0, 'cumRealisedPnl': '-745.25407591', 'positionMM': '0', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '0', 'seq': 9481050399, 'updatedTime': '1750384562833', 'side': '', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '0', 'size': '0', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
Waiting 59 seconds until next minute close
2025-06-20 11:57:02 [TradingEngine] INFO: Waiting 59 seconds until next minute close
2025-06-20 11:57:02,170 [INFO] Waiting 59 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
2025-06-20 11:58:01 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:58:01,188 [INFO] Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:58:01 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:58:01,540 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:58:01 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384680000', '102907', '102907', '102907', '102907', '0', '0'], ['1750384620000', '102907', '102907', '102907', '102907', '0.005', '514.535']]
2025-06-20 11:58:01,540 [INFO] Klines response type: <class 'list'>, data: [['1750384680000', '102907', '102907', '102907', '102907', '0', '0'], ['1750384620000', '102907', '102907', '102907', '102907', '0.005', '514.535']]
Updated data cache for BTCUSDT 1m
New data received for BTCUSDT 1m
Running strategies for BTCUSDT 1m
2025-06-20 11:58:01 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:58:01,543 [INFO] Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:58:01 [StrategyB] INFO: Latest candle for BTCUSDT 1m:
2025-06-20 11:58:01,546 [INFO] Latest candle for BTCUSDT 1m:
2025-06-20 11:58:01 [StrategyB] INFO: - Time: 2025-06-20 10:19:00 (Minute: 19)
2025-06-20 11:58:01,546 [INFO] - Time: 2025-06-20 10:19:00 (Minute: 19)
2025-06-20 11:58:01 [StrategyB] INFO: - Price: 102907.00
2025-06-20 11:58:01,546 [INFO] - Price: 102907.00
2025-06-20 11:58:01 [StrategyB] INFO: - Even minute: False
2025-06-20 11:58:01,547 [INFO] - Even minute: False
2025-06-20 11:58:01 [StrategyB] INFO: FORCING BUY signal (alternating from previous SELL)
2025-06-20 11:58:01,548 [INFO] FORCING BUY signal (alternating from previous SELL)
2025-06-20 11:58:01 [StrategyB] INFO: Minute 19 is even, generating LONG signal
2025-06-20 11:58:01,548 [INFO] Minute 19 is even, generating LONG signal
2025-06-20 11:58:01 [StrategyB] INFO: Generated 1 signals for BTCUSDT
2025-06-20 11:58:01,548 [INFO] Generated 1 signals for BTCUSDT
2025-06-20 11:58:01 [StrategyB] INFO: Signal: SignalType.BUY at price 102907.0 with SL=102639.74, TP=103441.51
2025-06-20 11:58:01,549 [INFO] Signal: SignalType.BUY at price 102907.0 with SL=102639.74, TP=103441.51
2025-06-20 11:58:01 [TradingEngine] INFO: ======= BTCUSDT 1m CLOSE at 2025-06-20 00:19:00 =======
2025-06-20 11:58:01,550 [INFO] ======= BTCUSDT 1m CLOSE at 2025-06-20 00:19:00 =======
2025-06-20 11:58:01 [TradingEngine] INFO: OHLCV: Open=102907.00, High=102907.00, Low=102907.00, Close=102907.00, Volume=0.00
2025-06-20 11:58:01,550 [INFO] OHLCV: Open=102907.00, High=102907.00, Low=102907.00, Close=102907.00, Volume=0.00
Processed BTCUSDT 1m candle close at 2025-06-20 00:19:00
Received 1 signals for BTCUSDT
2025-06-20 11:58:01 [TradingEngine] INFO: Signal generated for BTCUSDT: SignalType.BUY LONG
2025-06-20 11:58:01,551 [INFO] Signal generated for BTCUSDT: SignalType.BUY LONG
SIGNAL: BTCUSDT SignalType.BUY LONG
Validating trade for BTCUSDT...
TEST MODE: All trades allowed for testing
Executing signal for BTCUSDT...
Executing signal for BTCUSDT...
Current price for BTCUSDT: 102907.0
Using fixed position size: 0.01
Order side: Buy, direction: LONG
Placing Buy market order for BTCUSDT without TP/SL
2025-06-20 11:58:01 [TradingEngine] INFO: Entering LONG position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:58:01,901 [INFO] Entering LONG position for BTCUSDT, qty=0.01 (without TP/SL)
Engine status: Running=True, Active positions=0
2025-06-20 11:58:02 [TradingEngine] ERROR: Failed to place order: Unknown error
2025-06-20 11:58:02,355 [ERROR] Failed to place order: Unknown error
2025-06-20 11:58:02 [TradingEngine] INFO: LONG order result: {'orderId': 'ef52508f-2cd5-4c54-8abb-fa7a584bdd92', 'orderLinkId': ''}
2025-06-20 11:58:02,357 [INFO] LONG order result: {'orderId': 'ef52508f-2cd5-4c54-8abb-fa7a584bdd92', 'orderLinkId': ''}
Order not filled immediately, will set TP/SL after fill confirmation
2025-06-20 11:58:02 [TradingEngine] INFO: Order executed for BTCUSDT Buy: ef52508f-2cd5-4c54-8abb-fa7a584bdd92
2025-06-20 11:58:02,359 [INFO] Order executed for BTCUSDT Buy: ef52508f-2cd5-4c54-8abb-fa7a584bdd92
SUCCESS: Order executed for BTCUSDT Buy: ef52508f-2cd5-4c54-8abb-fa7a584bdd92
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
2025-06-20 11:58:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:58:02,368 [INFO] Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:58:02 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:58:02,724 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:58:02 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384500000', '103139.6', '103139.6', '102907', '102907', '0.035', '3601.8442'], ['1750384200000', '102907', '103139.6', '102907', '103139.6', '0.17', '17531.0014']]
2025-06-20 11:58:02,731 [INFO] Klines response type: <class 'list'>, data: [['1750384500000', '103139.6', '103139.6', '102907', '102907', '0.035', '3601.8442'], ['1750384200000', '102907', '103139.6', '102907', '103139.6', '0.17', '17531.0014']]
No new data for BTCUSDT 5m
No new data for BTCUSDT 5m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
2025-06-20 11:58:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:58:02,749 [INFO] Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:58:03 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:58:03,100 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:58:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.302', '134142.1583'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
2025-06-20 11:58:03,101 [INFO] Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.302', '134142.1583'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
2025-06-20 11:58:03 [TradingEngine] INFO: Checking 1 pending TP/SL orders
2025-06-20 11:58:03,113 [INFO] Checking 1 pending TP/SL orders
2025-06-20 11:58:03 [TradingEngine] INFO: Getting order info for ef52508f-2cd5-4c54-8abb-fa7a584bdd92 on BTCUSDT
2025-06-20 11:58:03,115 [INFO] Getting order info for ef52508f-2cd5-4c54-8abb-fa7a584bdd92 on BTCUSDT
Engine status: Running=True, Active positions=0
2025-06-20 11:58:03 [TradingEngine] INFO: Order ef52508f-2cd5-4c54-8abb-fa7a584bdd92 filled, setting TP/SL
2025-06-20 11:58:03,472 [INFO] Order ef52508f-2cd5-4c54-8abb-fa7a584bdd92 filled, setting TP/SL
2025-06-20 11:58:03 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=20
2025-06-20 11:58:03,624 [INFO] Fetching kline data for BTCUSDT 1, limit=20
2025-06-20 11:58:03 [TradingEngine] INFO: Retrieved 20 klines for BTCUSDT
2025-06-20 11:58:03,766 [INFO] Retrieved 20 klines for BTCUSDT
2025-06-20 11:58:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384680000', '102907', '103139.6', '102907', '103139.6', '0.01', '1031.1673'], ['1750384620000', '102907', '102907', '102907', '102907', '0.005', '514.535']]
2025-06-20 11:58:03,767 [INFO] Klines response type: <class 'list'>, data: [['1750384680000', '102907', '103139.6', '102907', '103139.6', '0.01', '1031.1673'],['1750384620000', '102907', '102907', '102907', '102907', '0.005', '514.535']]
2025-06-20 11:58:03 [TradingEngine] INFO: Calculated ATR from historical data: 183.47142857143314
2025-06-20 11:58:03,772 [INFO] Calculated ATR from historical data: 183.47142857143314
2025-06-20 11:58:03 [TradingEngine] INFO: Setting TP/SL for filled order ef52508f-2cd5-4c54-8abb-fa7a584bdd92
2025-06-20 11:58:03,773 [INFO] Setting TP/SL for filled order ef52508f-2cd5-4c54-8abb-fa7a584bdd92
2025-06-20 11:58:03 [TradingEngine] INFO: Getting order info for ef52508f-2cd5-4c54-8abb-fa7a584bdd92 on BTCUSDT
2025-06-20 11:58:03,774 [INFO] Getting order info for ef52508f-2cd5-4c54-8abb-fa7a584bdd92 on BTCUSDT
2025-06-20 11:58:04 [TradingEngine] INFO: Fill info for ef52508f-2cd5-4c54-8abb-fa7a584bdd92: {'filled': True, 'fill_price': 103116.73, 'side': 'Buy', 'position_idx': 0}
2025-06-20 11:58:04,128 [INFO] Fill info for ef52508f-2cd5-4c54-8abb-fa7a584bdd92: {'filled': True, 'fill_price': 103116.73, 'side': 'Buy', 'position_idx': 0}
Engine status: Running=True, Active positions=0
2025-06-20 11:58:04 [TradingEngine] INFO: Final TP/SL for BTCUSDT LONG: TP=103850.62, SL=102749.79, Mark Price=103139.6
2025-06-20 11:58:04,581 [INFO] Final TP/SL for BTCUSDT LONG: TP=103850.62, SL=102749.79, Mark Price=103139.6
2025-06-20 11:58:04 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:58:04,725 [WARNING] Error setting trading stop (attempt 1/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:58:05 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:58:05,685 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:58:06 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:58:06,834 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:58:06 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:58:06,835 [ERROR] Failed to set trading stop after 3 attempts
Updating position cache
Updating position cache...
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '103116.73', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '103850.6', 'positionValue': '1031.1673', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '0.2287', 'markPrice': '103139.6', 'adlRankIndicator': 2, 'cumRealisedPnl': '-745.82121793', 'positionMM': '5.1558365', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '1031.1673', 'seq': 9481050685, 'updatedTime': '1750384684665', 'side': 'Buy', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '-0.56714202', 'size': '0.01', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '102749.7', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
2025-06-20 11:58:06 [TradingEngine] INFO: Getting order info for ef52508f-2cd5-4c54-8abb-fa7a584bdd92 on BTCUSDT
2025-06-20 11:58:06,981 [INFO] Getting order info for ef52508f-2cd5-4c54-8abb-fa7a584bdd92 on BTCUSDT
2025-06-20 11:58:07 [TradingEngine] INFO: Fill info for ef52508f-2cd5-4c54-8abb-fa7a584bdd92: {'filled': True, 'fill_price': 103116.73, 'side': 'Buy', 'position_idx': 0}
2025-06-20 11:58:07,133 [INFO] Fill info for ef52508f-2cd5-4c54-8abb-fa7a584bdd92: {'filled': True, 'fill_price': 103116.73, 'side': 'Buy', 'position_idx': 0}
Pending order ef52508f-2cd5-4c54-8abb-fa7a584bdd92 filled at 103116.73, setting TP/SL
Setting TP/SL for filled order ef52508f-2cd5-4c54-8abb-fa7a584bdd92 at price 103116.73
ATR not found in data cache, calculating approximation
Calculated average range as ATR approximation: 83.78571428571637
Using ATR value: 83.78571428571637 for TP/SL calculation
Calculated TP/SL for BTCUSDT LONG: TP=103451.87, SL=102949.16
2025-06-20 11:58:07 [TradingEngine] INFO: Setting TP/SL for BTCUSDT position: TP=103451.87, SL=102949.16
2025-06-20 11:58:07,281 [INFO] Setting TP/SL for BTCUSDT position: TP=103451.87, SL=102949.16
2025-06-20 11:58:07 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:58:07,574 [WARNING] Error setting trading stop (attempt 1/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:58:08 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:58:08,234 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:58:09 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:58:09,590 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:58:09 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:58:09,590 [ERROR] Failed to set trading stop after 3 attempts
2025-06-20 11:58:09 [TradingEngine] INFO: Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:58:09,590 [INFO] Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:58:09 [TradingEngine] ERROR: Error setting TP/SL: Failed after 3 attempts
2025-06-20 11:58:09,591 [ERROR] Error setting TP/SL: Failed after 3 attempts
ERROR setting TP/SL: Failed after 3 attempts
Waiting 52 seconds until next minute close
2025-06-20 11:58:09 [TradingEngine] INFO: Waiting 52 seconds until next minute close
2025-06-20 11:58:09,731 [INFO] Waiting 52 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
2025-06-20 11:59:01 [TradingEngine] INFO: Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:59:01,736 [INFO] Fetching kline data for BTCUSDT 1, limit=100
2025-06-20 11:59:02 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:59:02,085 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:59:02 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384740000', '102907', '102907', '102907', '102907', '0', '0'], ['1750384680000', '102907', '103139.6', '102907', '102907', '0.072', '7411.4641']]
2025-06-20 11:59:02,085 [INFO] Klines response type: <class 'list'>, data: [['1750384740000', '102907', '102907', '102907', '102907', '0', '0'], ['1750384680000', '102907', '103139.6', '102907', '102907', '0.072', '7411.4641']]
Updated data cache for BTCUSDT 1m
New data received for BTCUSDT 1m
Running strategies for BTCUSDT 1m
2025-06-20 11:59:02 [StrategyB] INFO: Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:59:02,088 [INFO] Processing data for BTCUSDT with timeframes: ['1m']
2025-06-20 11:59:02 [StrategyB] INFO: Latest candle for BTCUSDT 1m:
2025-06-20 11:59:02,090 [INFO] Latest candle for BTCUSDT 1m:
2025-06-20 11:59:02 [StrategyB] INFO: - Time: 2025-06-20 10:20:00 (Minute: 20)
2025-06-20 11:59:02,090 [INFO] - Time: 2025-06-20 10:20:00 (Minute: 20)
2025-06-20 11:59:02 [StrategyB] INFO: - Price: 103139.60
2025-06-20 11:59:02,092 [INFO] - Price: 103139.60
2025-06-20 11:59:02 [StrategyB] INFO: - Even minute: True
2025-06-20 11:59:02,092 [INFO] - Even minute: True
2025-06-20 11:59:02 [StrategyB] INFO: FORCING SELL signal (alternating from previous BUY)
2025-06-20 11:59:02,093 [INFO] FORCING SELL signal (alternating from previous BUY)
2025-06-20 11:59:02 [StrategyB] INFO: Minute 20 is odd, generating SHORT signal
2025-06-20 11:59:02,093 [INFO] Minute 20 is odd, generating SHORT signal
2025-06-20 11:59:02 [StrategyB] INFO: Generated 1 signals for BTCUSDT
2025-06-20 11:59:02,093 [INFO] Generated 1 signals for BTCUSDT
2025-06-20 11:59:02 [StrategyB] INFO: Signal: SignalType.SELL at price 103139.6 with SL=103373.63, TP=102671.54
2025-06-20 11:59:02,094 [INFO] Signal: SignalType.SELL at price 103139.6 with SL=103373.63, TP=102671.54
2025-06-20 11:59:02 [TradingEngine] INFO: ======= BTCUSDT 1m CLOSE at 2025-06-20 00:20:00 =======
2025-06-20 11:59:02,094 [INFO] ======= BTCUSDT 1m CLOSE at 2025-06-20 00:20:00 =======
2025-06-20 11:59:02 [TradingEngine] INFO: OHLCV: Open=102907.00, High=103139.60, Low=102907.00, Close=103139.60, Volume=0.08
2025-06-20 11:59:02,095 [INFO] OHLCV: Open=102907.00, High=103139.60, Low=102907.00, Close=103139.60, Volume=0.08
Processed BTCUSDT 1m candle close at 2025-06-20 00:20:00
Received 1 signals for BTCUSDT
2025-06-20 11:59:02 [TradingEngine] INFO: Signal generated for BTCUSDT: SignalType.SELL SHORT
2025-06-20 11:59:02,095 [INFO] Signal generated for BTCUSDT: SignalType.SELL SHORT
SIGNAL: BTCUSDT SignalType.SELL SHORT
Validating trade for BTCUSDT...
TEST MODE: All trades allowed for testing
Executing signal for BTCUSDT...
Executing signal for BTCUSDT...
Engine status: Running=True, Active positions=0
Current price for BTCUSDT: 102907.0
Using fixed position size: 0.01
Order side: Sell, direction: SHORT
Placing Sell market order for BTCUSDT without TP/SL
2025-06-20 11:59:02 [TradingEngine] INFO: Entering SHORT position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:59:02,445 [INFO] Entering SHORT position for BTCUSDT, qty=0.01 (without TP/SL)
2025-06-20 11:59:02 [TradingEngine] ERROR: Failed to place order: Unknown error
2025-06-20 11:59:02,792 [ERROR] Failed to place order: Unknown error
2025-06-20 11:59:02 [TradingEngine] INFO: SHORT order result: {'orderId': 'a412a839-adfc-4167-a5d3-53b50fc32066', 'orderLinkId': ''}
2025-06-20 11:59:02,793 [INFO] SHORT order result: {'orderId': 'a412a839-adfc-4167-a5d3-53b50fc32066', 'orderLinkId': ''}
Order not filled immediately, will set TP/SL after fill confirmation
2025-06-20 11:59:02 [TradingEngine] INFO: Order executed for BTCUSDT Sell: a412a839-adfc-4167-a5d3-53b50fc32066
2025-06-20 11:59:02,793 [INFO] Order executed for BTCUSDT Sell: a412a839-adfc-4167-a5d3-53b50fc32066
SUCCESS: Order executed for BTCUSDT Sell: a412a839-adfc-4167-a5d3-53b50fc32066
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
2025-06-20 11:59:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:59:02,796 [INFO] Fetching kline data for BTCUSDT 5, limit=100
2025-06-20 11:59:02 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:59:02,939 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:59:02 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750384500000', '103139.6', '103139.6', '102907', '102907', '0.107', '11013.3083'], ['1750384200000', '102907', '103139.6', '102907', '103139.6', '0.17', '17531.0014']]
2025-06-20 11:59:02,939 [INFO] Klines response type: <class 'list'>, data: [['1750384500000', '103139.6', '103139.6', '102907', '102907', '0.107', '11013.3083'], ['1750384200000', '102907', '103139.6', '102907', '103139.6', '0.17', '17531.0014']]
No new data for BTCUSDT 5m
No new data for BTCUSDT 5m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
2025-06-20 11:59:02 [TradingEngine] INFO: Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:59:02,944 [INFO] Fetching kline data for BTCUSDT 60, limit=100
2025-06-20 11:59:03 [TradingEngine] INFO: Retrieved 100 klines for BTCUSDT
2025-06-20 11:59:03,292 [INFO] Retrieved 100 klines for BTCUSDT
2025-06-20 11:59:03 [TradingEngine] INFO: Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.374', '141553.6224'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
2025-06-20 11:59:03,293 [INFO] Klines response type: <class 'list'>, data: [['1750381200000', '103139.6', '103139.6', '102907', '102907', '1.374', '141553.6224'], ['1750377600000', '103139.6', '103139.6', '102907', '103139.6', '10.957', '1128071.573']]
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
2025-06-20 11:59:03 [TradingEngine] INFO: Checking 1 pending TP/SL orders
2025-06-20 11:59:03,295 [INFO] Checking 1 pending TP/SL orders
2025-06-20 11:59:03 [TradingEngine] INFO: Getting order info for a412a839-adfc-4167-a5d3-53b50fc32066 on BTCUSDT
2025-06-20 11:59:03,296 [INFO] Getting order info for a412a839-adfc-4167-a5d3-53b50fc32066 on BTCUSDT
2025-06-20 11:59:03 [TradingEngine] INFO: Order a412a839-adfc-4167-a5d3-53b50fc32066 filled, setting TP/SL
2025-06-20 11:59:03,449 [INFO] Order a412a839-adfc-4167-a5d3-53b50fc32066 filled, setting TP/SL
Engine status: Running=True, Active positions=0
2025-06-20 11:59:03 [TradingEngine] WARNING: No open position for a412a839-adfc-4167-a5d3-53b50fc32066, skipping TP/SL
2025-06-20 11:59:03,797 [WARNING] No open position for a412a839-adfc-4167-a5d3-53b50fc32066, skipping TP/SL
Updating position cache
Updating position cache...
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '0', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '', 'positionValue': '', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '', 'markPrice': '103011.28', 'adlRankIndicator': 0, 'cumRealisedPnl': '-748.48450643', 'positionMM': '0', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '0', 'seq': 9481050841, 'updatedTime': '1750384742739', 'side': '', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '0', 'size': '0', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
2025-06-20 11:59:04 [TradingEngine] INFO: Getting order info for a412a839-adfc-4167-a5d3-53b50fc32066 on BTCUSDT
2025-06-20 11:59:04,147 [INFO] Getting order info for a412a839-adfc-4167-a5d3-53b50fc32066 on BTCUSDT
2025-06-20 11:59:04 [TradingEngine] INFO: Fill info for a412a839-adfc-4167-a5d3-53b50fc32066: {'filled': True, 'fill_price': 102907.0, 'side': 'Sell', 'position_idx': 0}
2025-06-20 11:59:04,296 [INFO] Fill info for a412a839-adfc-4167-a5d3-53b50fc32066: {'filled': True, 'fill_price': 102907.0, 'side': 'Sell', 'position_idx': 0}
Pending order a412a839-adfc-4167-a5d3-53b50fc32066 filled at 102907.0, setting TP/SL
Setting TP/SL for filled order a412a839-adfc-4167-a5d3-53b50fc32066 at price 102907.0
ATR not found in data cache, calculating approximation
Calculated average range as ATR approximation: 83.78571428571637
Using ATR value: 83.78571428571637 for TP/SL calculation
Calculated TP/SL for BTCUSDT SHORT: TP=102571.86, SL=103074.57
2025-06-20 11:59:04 [TradingEngine] INFO: Setting TP/SL for BTCUSDT position: TP=102571.86, SL=103074.57
2025-06-20 11:59:04,645 [INFO] Setting TP/SL for BTCUSDT position: TP=102571.86, SL=103074.57
Engine status: Running=True, Active positions=0
2025-06-20 11:59:05 [TradingEngine] WARNING: Error setting trading stop (attempt 1/3): No response
2025-06-20 11:59:05,138 [WARNING] Error setting trading stop (attempt 1/3): No response
2025-06-20 11:59:05 [TradingEngine] WARNING: Error setting trading stop (attempt 2/3): No response
2025-06-20 11:59:05,792 [WARNING] Error setting trading stop (attempt 2/3): No response
Engine status: Running=True, Active positions=0
2025-06-20 11:59:06 [TradingEngine] WARNING: Error setting trading stop (attempt 3/3): No response
2025-06-20 11:59:06,949 [WARNING] Error setting trading stop (attempt 3/3): No response
2025-06-20 11:59:06 [TradingEngine] ERROR: Failed to set trading stop after 3 attempts
2025-06-20 11:59:06,950 [ERROR] Failed to set trading stop after 3 attempts
2025-06-20 11:59:06 [TradingEngine] INFO: Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:59:06,950 [INFO] Set TP/SL result: {'error': 'Failed after 3 attempts'}
2025-06-20 11:59:06 [TradingEngine] ERROR: Error setting TP/SL: Failed after 3 attempts
2025-06-20 11:59:06,951 [ERROR] Error setting TP/SL: Failed after 3 attempts
ERROR setting TP/SL: Failed after 3 attempts
Waiting 54 seconds until next minute close
2025-06-20 11:59:07 [TradingEngine] INFO: Waiting 54 seconds until next minute close
2025-06-20 11:59:07,299 [INFO] Waiting 54 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Processing symbol: BTCUSDT at minute close
Processing BTCUSDT on 1m timeframe
Fetching data for BTCUSDT 1m
No new data for BTCUSDT 1m
No new data for BTCUSDT 1m
Processing BTCUSDT on 5m timeframe
Fetching data for BTCUSDT 5m
No new data for BTCUSDT 5m
No new data for BTCUSDT 5m
Processing BTCUSDT on 1h timeframe
Fetching data for BTCUSDT 1h
No new data for BTCUSDT 1h
No new data for BTCUSDT 1h
Checking TP/SL conditions
Updating position cache
Updating position cache...
Engine status: Running=True, Active positions=0
Updated position for BTCUSDT: {'symbol': 'BTCUSDT', 'leverage': '1', 'autoAddMargin': 0, 'avgPrice': '0', 'liqPrice': '', 'riskLimitValue': '2000000', 'takeProfit': '', 'positionValue': '', 'isReduceOnly': False, 'tpslMode': 'Full', 'riskId': 1, 'trailingStop': '0', 'unrealisedPnl': '', 'markPrice': '103016.88', 'adlRankIndicator': 0, 'cumRealisedPnl': '-748.48450643', 'positionMM': '0', 'createdTime': '1746973619032', 'positionIdx': 0, 'positionIM': '0', 'seq': 9481050841, 'updatedTime': '1750384742739', 'side': '', 'bustPrice': '', 'positionBalance': '0', 'leverageSysUpdatedTime': '', 'curRealisedPnl': '0', 'size': '0', 'positionStatus': 'Normal', 'mmrSysUpdatedTime': '', 'stopLoss': '', 'tradeMode': 0, 'sessionAvgPrice': ''}
Engine status: Running=True, Active positions=0
Waiting 60 seconds until next minute close
2025-06-20 12:00:02 [TradingEngine] INFO: Waiting 60 seconds until next minute close
2025-06-20 12:00:02,001 [INFO] Waiting 60 seconds until next minute close
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
Engine status: Running=True, Active positions=0
